  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (1.5ms)[0m  [1mCREATE TABLE "accounting_accounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "currency" varchar(3), "status" varchar(255), "configuration" text, "balance" integer DEFAULT 0, "owner_id" integer, "owner_type" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (1.1ms)[0m  CREATE INDEX "index_accounting_accounts_on_owner_id_and_owner_type" ON "accounting_accounts" ("owner_id", "owner_type")
  [1m[36m (1.1ms)[0m  [1mCREATE TABLE "accounting_entries" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "amount" integer, "account_id" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (1.0ms)[0m  CREATE INDEX "index_accounting_entries_on_account_id" ON "accounting_entries" ("account_id")
  [1m[36m (1.2ms)[0m  [1mCREATE TABLE "accounting_transactions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(255), "category" varchar(255), "code" varchar(255), "description" text, "details" text, "credit_entry_id" integer, "debit_entry_id" integer, "adjustment_transaction_id" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (1.0ms)[0m  CREATE INDEX "index_accounting_transactions_on_adjustment_transaction_id" ON "accounting_transactions" ("adjustment_transaction_id")
  [1m[36m (1.1ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_category" ON "accounting_transactions" ("category")[0m
  [1m[35m (1.2ms)[0m  CREATE INDEX "index_accounting_transactions_on_credit_entry_id" ON "accounting_transactions" ("credit_entry_id")
  [1m[36m (1.2ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_debit_entry_id" ON "accounting_transactions" ("debit_entry_id")[0m
  [1m[35m (1.2ms)[0m  CREATE INDEX "index_accounting_transactions_on_uuid" ON "accounting_transactions" ("uuid")
  [1m[36m (1.0ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) [0m
  [1m[35m (1.1ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.1ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (1.0ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131003195140')
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "updated_at") VALUES (?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 19:55:24 UTC +00:00], ["currency", "GBP"], ["updated_at", Thu, 03 Oct 2013 19:55:24 UTC +00:00]]
  [1m[36m (1.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mAccounting::Account Load (0.3ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 500], ["created_at", Thu, 03 Oct 2013 19:55:24 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 19:55:24 UTC +00:00]]
  [1m[36mAccounting::Account Load (1.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "updated_at") VALUES (?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 19:55:24 UTC +00:00], ["currency", "GBP"], ["updated_at", Thu, 03 Oct 2013 19:55:24 UTC +00:00]]
  [1m[36m (1.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 2], ["amount", 500], ["created_at", Thu, 03 Oct 2013 19:55:24 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 19:55:24 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 2]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "updated_at") VALUES (?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 19:55:24 UTC +00:00], ["currency", "GBP"], ["updated_at", Thu, 03 Oct 2013 19:55:24 UTC +00:00]]
  [1m[36m (1.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 3], ["amount", 500], ["created_at", Thu, 03 Oct 2013 19:55:24 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 19:55:24 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 3]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (3.1ms)[0m  [1mDROP TABLE "accounting_accounts"[0m
  [1m[35m (1.2ms)[0m  CREATE TABLE "accounting_accounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "currency" varchar(3), "status" varchar(255), "configuration" text, "balance" integer DEFAULT 0, "owner_id" integer, "owner_type" varchar(255), "created_at" datetime, "updated_at" datetime) 
  [1m[36m (1.1ms)[0m  [1mCREATE INDEX "index_accounting_accounts_on_owner_id_and_owner_type" ON "accounting_accounts" ("owner_id", "owner_type")[0m
  [1m[35m (1.3ms)[0m  DROP TABLE "accounting_entries"
  [1m[36m (1.3ms)[0m  [1mCREATE TABLE "accounting_entries" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "amount" integer, "account_id" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (1.1ms)[0m  CREATE INDEX "index_accounting_entries_on_account_id" ON "accounting_entries" ("account_id")
  [1m[36m (1.4ms)[0m  [1mDROP TABLE "accounting_transactions"[0m
  [1m[35m (1.2ms)[0m  CREATE TABLE "accounting_transactions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(255), "category" varchar(255), "code" varchar(255), "description" text, "details" text, "credit_entry_id" integer, "debit_entry_id" integer, "adjustment_transaction_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (1.2ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_adjustment_transaction_id" ON "accounting_transactions" ("adjustment_transaction_id")[0m
  [1m[35m (1.2ms)[0m  CREATE INDEX "index_accounting_transactions_on_category" ON "accounting_transactions" ("category")
  [1m[36m (1.2ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_credit_entry_id" ON "accounting_transactions" ("credit_entry_id")[0m
  [1m[35m (1.1ms)[0m  CREATE INDEX "index_accounting_transactions_on_debit_entry_id" ON "accounting_transactions" ("debit_entry_id")
  [1m[36m (1.3ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_uuid" ON "accounting_transactions" ("uuid")[0m
  [1m[35m (0.2ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "updated_at") VALUES (?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 19:56:33 UTC +00:00], ["currency", "GBP"], ["updated_at", Thu, 03 Oct 2013 19:56:33 UTC +00:00]]
  [1m[36m (2.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mAccounting::Account Load (0.3ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 500], ["created_at", Thu, 03 Oct 2013 19:56:33 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 19:56:33 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.3ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "updated_at") VALUES (?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 19:56:33 UTC +00:00], ["currency", "GBP"], ["updated_at", Thu, 03 Oct 2013 19:56:33 UTC +00:00]]
  [1m[36m (0.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mAccounting::Account Load (0.4ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 2], ["amount", 500], ["created_at", Thu, 03 Oct 2013 19:56:33 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 19:56:33 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.4ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 2]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "updated_at") VALUES (?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 19:56:33 UTC +00:00], ["currency", "GBP"], ["updated_at", Thu, 03 Oct 2013 19:56:33 UTC +00:00]]
  [1m[36m (1.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 3], ["amount", 500], ["created_at", Thu, 03 Oct 2013 19:56:33 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 19:56:33 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.3ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 3]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (1.8ms)[0m  [1mDROP TABLE "accounting_accounts"[0m
  [1m[35m (1.6ms)[0m  CREATE TABLE "accounting_accounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "currency" varchar(3), "status" varchar(255), "configuration" text, "balance" integer DEFAULT 0, "owner_id" integer, "owner_type" varchar(255), "created_at" datetime, "updated_at" datetime) 
  [1m[36m (1.4ms)[0m  [1mCREATE INDEX "index_accounting_accounts_on_owner_id_and_owner_type" ON "accounting_accounts" ("owner_id", "owner_type")[0m
  [1m[35m (1.1ms)[0m  DROP TABLE "accounting_entries"
  [1m[36m (1.2ms)[0m  [1mCREATE TABLE "accounting_entries" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "amount" integer, "account_id" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (1.2ms)[0m  CREATE INDEX "index_accounting_entries_on_account_id" ON "accounting_entries" ("account_id")
  [1m[36m (1.8ms)[0m  [1mDROP TABLE "accounting_transactions"[0m
  [1m[35m (1.3ms)[0m  CREATE TABLE "accounting_transactions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(255), "category" varchar(255), "code" varchar(255), "description" text, "details" text, "credit_entry_id" integer, "debit_entry_id" integer, "adjustment_transaction_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (1.2ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_adjustment_transaction_id" ON "accounting_transactions" ("adjustment_transaction_id")[0m
  [1m[35m (1.4ms)[0m  CREATE INDEX "index_accounting_transactions_on_category" ON "accounting_transactions" ("category")
  [1m[36m (1.4ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_credit_entry_id" ON "accounting_transactions" ("credit_entry_id")[0m
  [1m[35m (1.0ms)[0m  CREATE INDEX "index_accounting_transactions_on_debit_entry_id" ON "accounting_transactions" ("debit_entry_id")
  [1m[36m (1.0ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_uuid" ON "accounting_transactions" ("uuid")[0m
  [1m[35m (0.2ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (1.2ms)[0m  [1mDROP TABLE "accounting_accounts"[0m
  [1m[35m (1.2ms)[0m  CREATE TABLE "accounting_accounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "currency" varchar(3), "status" varchar(255), "configuration" text, "balance" integer DEFAULT 0, "owner_id" integer, "owner_type" varchar(255), "created_at" datetime, "updated_at" datetime) 
  [1m[36m (1.2ms)[0m  [1mCREATE INDEX "index_accounting_accounts_on_owner_id_and_owner_type" ON "accounting_accounts" ("owner_id", "owner_type")[0m
  [1m[35m (1.0ms)[0m  DROP TABLE "accounting_entries"
  [1m[36m (1.2ms)[0m  [1mCREATE TABLE "accounting_entries" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "amount" integer, "account_id" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (1.2ms)[0m  CREATE INDEX "index_accounting_entries_on_account_id" ON "accounting_entries" ("account_id")
  [1m[36m (1.2ms)[0m  [1mDROP TABLE "accounting_transactions"[0m
  [1m[35m (1.0ms)[0m  CREATE TABLE "accounting_transactions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(255), "category" varchar(255), "code" varchar(255), "description" text, "details" text, "credit_entry_id" integer, "debit_entry_id" integer, "adjustment_transaction_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (1.3ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_adjustment_transaction_id" ON "accounting_transactions" ("adjustment_transaction_id")[0m
  [1m[35m (1.1ms)[0m  CREATE INDEX "index_accounting_transactions_on_category" ON "accounting_transactions" ("category")
  [1m[36m (1.3ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_credit_entry_id" ON "accounting_transactions" ("credit_entry_id")[0m
  [1m[35m (1.2ms)[0m  CREATE INDEX "index_accounting_transactions_on_debit_entry_id" ON "accounting_transactions" ("debit_entry_id")
  [1m[36m (1.1ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_uuid" ON "accounting_transactions" ("uuid")[0m
  [1m[35m (0.2ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "updated_at") VALUES (?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 19:57:58 UTC +00:00], ["currency", "GBP"], ["updated_at", Thu, 03 Oct 2013 19:57:58 UTC +00:00]]
  [1m[36m (0.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mAccounting::Account Load (0.3ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 500], ["created_at", Thu, 03 Oct 2013 19:57:58 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 19:57:58 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.3ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "updated_at") VALUES (?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 19:57:58 UTC +00:00], ["currency", "GBP"], ["updated_at", Thu, 03 Oct 2013 19:57:58 UTC +00:00]]
  [1m[36m (0.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 2], ["amount", 500], ["created_at", Thu, 03 Oct 2013 19:57:58 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 19:57:58 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 2]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "updated_at") VALUES (?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 19:57:58 UTC +00:00], ["currency", "GBP"], ["updated_at", Thu, 03 Oct 2013 19:57:58 UTC +00:00]]
  [1m[36m (1.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 3], ["amount", 500], ["created_at", Thu, 03 Oct 2013 19:57:58 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 19:57:58 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 3]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  commit transaction
  [1m[36m (3.4ms)[0m  [1mDROP TABLE "accounting_accounts"[0m
  [1m[35m (1.6ms)[0m  CREATE TABLE "accounting_accounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "currency" varchar(3), "status" varchar(255), "configuration" text, "balance" integer DEFAULT 0, "owner_id" integer, "owner_type" varchar(255), "created_at" datetime, "updated_at" datetime) 
  [1m[36m (1.4ms)[0m  [1mCREATE INDEX "index_accounting_accounts_on_owner_id_and_owner_type" ON "accounting_accounts" ("owner_id", "owner_type")[0m
  [1m[35m (2.1ms)[0m  DROP TABLE "accounting_entries"
  [1m[36m (1.4ms)[0m  [1mCREATE TABLE "accounting_entries" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "amount" integer, "account_id" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (1.1ms)[0m  CREATE INDEX "index_accounting_entries_on_account_id" ON "accounting_entries" ("account_id")
  [1m[36m (3.5ms)[0m  [1mDROP TABLE "accounting_transactions"[0m
  [1m[35m (1.2ms)[0m  CREATE TABLE "accounting_transactions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(255), "category" varchar(255), "code" varchar(255), "description" text, "details" text, "credit_entry_id" integer, "debit_entry_id" integer, "adjustment_transaction_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (1.2ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_adjustment_transaction_id" ON "accounting_transactions" ("adjustment_transaction_id")[0m
  [1m[35m (1.3ms)[0m  CREATE INDEX "index_accounting_transactions_on_category" ON "accounting_transactions" ("category")
  [1m[36m (1.1ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_credit_entry_id" ON "accounting_transactions" ("credit_entry_id")[0m
  [1m[35m (1.1ms)[0m  CREATE INDEX "index_accounting_transactions_on_debit_entry_id" ON "accounting_transactions" ("debit_entry_id")
  [1m[36m (1.1ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_uuid" ON "accounting_transactions" ("uuid")[0m
  [1m[35m (0.5ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "updated_at") VALUES (?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:06:08 UTC +00:00], ["currency", "GBP"], ["updated_at", Thu, 03 Oct 2013 20:06:08 UTC +00:00]]
  [1m[36m (0.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mAccounting::Account Load (0.3ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:06:08 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:06:08 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "updated_at") VALUES (?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:06:08 UTC +00:00], ["currency", "GBP"], ["updated_at", Thu, 03 Oct 2013 20:06:08 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 2], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:06:08 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:06:08 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 2]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "updated_at") VALUES (?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:06:08 UTC +00:00], ["currency", "GBP"], ["updated_at", Thu, 03 Oct 2013 20:06:08 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 3], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:06:08 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:06:08 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 3]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (2.4ms)[0m  [1mDROP TABLE "accounting_accounts"[0m
  [1m[35m (1.1ms)[0m  CREATE TABLE "accounting_accounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "currency" varchar(3), "status" varchar(255), "configuration" text, "balance" integer DEFAULT 0, "owner_id" integer, "owner_type" varchar(255), "created_at" datetime, "updated_at" datetime) 
  [1m[36m (1.2ms)[0m  [1mCREATE INDEX "index_accounting_accounts_on_owner_id_and_owner_type" ON "accounting_accounts" ("owner_id", "owner_type")[0m
  [1m[35m (1.1ms)[0m  DROP TABLE "accounting_entries"
  [1m[36m (1.2ms)[0m  [1mCREATE TABLE "accounting_entries" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "amount" integer, "account_id" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (1.1ms)[0m  CREATE INDEX "index_accounting_entries_on_account_id" ON "accounting_entries" ("account_id")
  [1m[36m (1.5ms)[0m  [1mDROP TABLE "accounting_transactions"[0m
  [1m[35m (1.3ms)[0m  CREATE TABLE "accounting_transactions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(255), "category" varchar(255), "code" varchar(255), "description" text, "details" text, "credit_entry_id" integer, "debit_entry_id" integer, "adjustment_transaction_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (1.2ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_adjustment_transaction_id" ON "accounting_transactions" ("adjustment_transaction_id")[0m
  [1m[35m (1.1ms)[0m  CREATE INDEX "index_accounting_transactions_on_category" ON "accounting_transactions" ("category")
  [1m[36m (1.2ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_credit_entry_id" ON "accounting_transactions" ("credit_entry_id")[0m
  [1m[35m (1.2ms)[0m  CREATE INDEX "index_accounting_transactions_on_debit_entry_id" ON "accounting_transactions" ("debit_entry_id")
  [1m[36m (1.1ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_uuid" ON "accounting_transactions" ("uuid")[0m
  [1m[35m (0.2ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Test' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:07:06 UTC +00:00], ["currency", :GBP], ["name", "Test"], ["updated_at", Thu, 03 Oct 2013 20:07:06 UTC +00:00]]
  [1m[35m (1.5ms)[0m  commit transaction
  [1m[36mAccounting::Account Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Test' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:07:06 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["updated_at", Thu, 03 Oct 2013 20:07:06 UTC +00:00]]
  [1m[36m (1.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:07:06 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["updated_at", Thu, 03 Oct 2013 20:07:06 UTC +00:00]]
  [1m[36m (1.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 2], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:07:07 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:07:07 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.3ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 2]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[35m (1.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Source' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:07:07 UTC +00:00], ["currency", :GBP], ["name", "Source"], ["updated_at", Thu, 03 Oct 2013 20:07:07 UTC +00:00]]
  [1m[36m (0.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "updated_at") VALUES (?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:07:07 UTC +00:00], ["currency", "GBP"], ["updated_at", Thu, 03 Oct 2013 20:07:07 UTC +00:00]]
  [1m[36m (1.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 5]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 5], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:07:07 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:07:07 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 5]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "updated_at") VALUES (?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:07:07 UTC +00:00], ["currency", "GBP"], ["updated_at", Thu, 03 Oct 2013 20:07:07 UTC +00:00]]
  [1m[36m (1.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 6], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:07:07 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:07:07 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 6]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "updated_at") VALUES (?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:07:07 UTC +00:00], ["currency", "GBP"], ["updated_at", Thu, 03 Oct 2013 20:07:07 UTC +00:00]]
  [1m[36m (1.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 7]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 7], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:07:07 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:07:07 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 7]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (3.1ms)[0m  [1mDROP TABLE "accounting_accounts"[0m
  [1m[35m (1.4ms)[0m  CREATE TABLE "accounting_accounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "currency" varchar(3), "status" varchar(255), "configuration" text, "balance" integer DEFAULT 0, "owner_id" integer, "owner_type" varchar(255), "created_at" datetime, "updated_at" datetime) 
  [1m[36m (1.3ms)[0m  [1mCREATE INDEX "index_accounting_accounts_on_owner_id_and_owner_type" ON "accounting_accounts" ("owner_id", "owner_type")[0m
  [1m[35m (1.4ms)[0m  DROP TABLE "accounting_entries"
  [1m[36m (1.2ms)[0m  [1mCREATE TABLE "accounting_entries" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "amount" integer, "account_id" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (1.0ms)[0m  CREATE INDEX "index_accounting_entries_on_account_id" ON "accounting_entries" ("account_id")
  [1m[36m (1.4ms)[0m  [1mDROP TABLE "accounting_transactions"[0m
  [1m[35m (1.2ms)[0m  CREATE TABLE "accounting_transactions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(255), "category" varchar(255), "code" varchar(255), "description" text, "details" text, "credit_entry_id" integer, "debit_entry_id" integer, "adjustment_transaction_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (1.2ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_adjustment_transaction_id" ON "accounting_transactions" ("adjustment_transaction_id")[0m
  [1m[35m (1.0ms)[0m  CREATE INDEX "index_accounting_transactions_on_category" ON "accounting_transactions" ("category")
  [1m[36m (1.0ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_credit_entry_id" ON "accounting_transactions" ("credit_entry_id")[0m
  [1m[35m (1.1ms)[0m  CREATE INDEX "index_accounting_transactions_on_debit_entry_id" ON "accounting_transactions" ("debit_entry_id")
  [1m[36m (1.1ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_uuid" ON "accounting_transactions" ("uuid")[0m
  [1m[35m (0.2ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:10:55 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["updated_at", Thu, 03 Oct 2013 20:10:55 UTC +00:00]]
  [1m[35m (2.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:10:55 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["updated_at", Thu, 03 Oct 2013 20:10:55 UTC +00:00]]
  [1m[35m (1.1ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mAccounting::Account Load (0.2ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:10:55 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:10:55 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.2ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Test' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:10:55 UTC +00:00], ["currency", :GBP], ["name", "Test"], ["updated_at", Thu, 03 Oct 2013 20:10:55 UTC +00:00]]
  [1m[35m (1.2ms)[0m  commit transaction
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Test' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Source' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:10:55 UTC +00:00], ["currency", :GBP], ["name", "Source"], ["updated_at", Thu, 03 Oct 2013 20:10:55 UTC +00:00]]
  [1m[36m (2.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "updated_at") VALUES (?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:10:55 UTC +00:00], ["currency", "GBP"], ["updated_at", Thu, 03 Oct 2013 20:10:55 UTC +00:00]]
  [1m[36m (1.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 5]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 5], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:10:55 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:10:55 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 5]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "updated_at") VALUES (?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:10:55 UTC +00:00], ["currency", "GBP"], ["updated_at", Thu, 03 Oct 2013 20:10:55 UTC +00:00]]
  [1m[36m (0.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 6]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 6], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:10:55 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:10:55 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 6]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "updated_at") VALUES (?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:10:55 UTC +00:00], ["currency", "GBP"], ["updated_at", Thu, 03 Oct 2013 20:10:55 UTC +00:00]]
  [1m[36m (1.2ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 7]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 7], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:10:55 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:10:55 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 7]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (30.9ms)[0m  commit transaction
  [1m[36m (2.6ms)[0m  [1mDROP TABLE "accounting_accounts"[0m
  [1m[35m (1.2ms)[0m  CREATE TABLE "accounting_accounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "currency" varchar(3), "status" varchar(255), "configuration" text, "balance" integer DEFAULT 0, "owner_id" integer, "owner_type" varchar(255), "created_at" datetime, "updated_at" datetime) 
  [1m[36m (1.3ms)[0m  [1mCREATE INDEX "index_accounting_accounts_on_owner_id_and_owner_type" ON "accounting_accounts" ("owner_id", "owner_type")[0m
  [1m[35m (3.7ms)[0m  DROP TABLE "accounting_entries"
  [1m[36m (1.3ms)[0m  [1mCREATE TABLE "accounting_entries" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "amount" integer, "account_id" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (1.4ms)[0m  CREATE INDEX "index_accounting_entries_on_account_id" ON "accounting_entries" ("account_id")
  [1m[36m (3.3ms)[0m  [1mDROP TABLE "accounting_transactions"[0m
  [1m[35m (1.3ms)[0m  CREATE TABLE "accounting_transactions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(255), "category" varchar(255), "code" varchar(255), "description" text, "details" text, "credit_entry_id" integer, "debit_entry_id" integer, "adjustment_transaction_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (1.4ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_adjustment_transaction_id" ON "accounting_transactions" ("adjustment_transaction_id")[0m
  [1m[35m (1.2ms)[0m  CREATE INDEX "index_accounting_transactions_on_category" ON "accounting_transactions" ("category")
  [1m[36m (1.4ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_credit_entry_id" ON "accounting_transactions" ("credit_entry_id")[0m
  [1m[35m (1.4ms)[0m  CREATE INDEX "index_accounting_transactions_on_debit_entry_id" ON "accounting_transactions" ("debit_entry_id")
  [1m[36m (1.3ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_uuid" ON "accounting_transactions" ("uuid")[0m
  [1m[35m (0.5ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "updated_at") VALUES (?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:07 UTC +00:00], ["currency", "GBP"], ["updated_at", Thu, 03 Oct 2013 20:16:07 UTC +00:00]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mAccounting::Account Load (0.4ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:16:07 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:16:07 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.4ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "updated_at") VALUES (?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:07 UTC +00:00], ["currency", "GBP"], ["updated_at", Thu, 03 Oct 2013 20:16:07 UTC +00:00]]
  [1m[36m (1.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 2], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:16:07 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:16:07 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.3ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 2]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "updated_at") VALUES (?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:07 UTC +00:00], ["currency", "GBP"], ["updated_at", Thu, 03 Oct 2013 20:16:07 UTC +00:00]]
  [1m[36m (2.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 3], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:16:07 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:16:07 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.3ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 3]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[35m (4.9ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mAccounting::Account Exists (0.3ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Source' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:07 UTC +00:00], ["currency", :GBP], ["name", "Source"], ["updated_at", Thu, 03 Oct 2013 20:16:07 UTC +00:00]]
  [1m[35m (7.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mAccounting::Account Exists (0.9ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"], ["created_at", Thu, 03 Oct 2013 20:16:07 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["updated_at", Thu, 03 Oct 2013 20:16:07 UTC +00:00]]
  [1m[35m (8.3ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mAccounting::Account Load (0.2ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 4]]
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 4], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:16:07 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:16:07 UTC +00:00]]
  [1m[35mAccounting::Account Load (3.4ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 4]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mAccounting::Account Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mAccounting::Account Exists (0.3ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36mAccounting::Account Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mAccounting::Account Exists (2.5ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mAccounting::Account Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mAccounting::Account Exists (0.3ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mAccounting::Account Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mAccounting::Account Exists (0.3ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mAccounting::Account Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Test' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:08 UTC +00:00], ["currency", :GBP], ["name", "Test"], ["updated_at", Thu, 03 Oct 2013 20:16:08 UTC +00:00]]
  [1m[36m (2.0ms)[0m  [1mcommit transaction[0m
  [1m[35mAccounting::Account Exists (5.0ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Test' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  commit transaction
  [1m[36m (3.6ms)[0m  [1mDROP TABLE "accounting_accounts"[0m
  [1m[35m (1.6ms)[0m  CREATE TABLE "accounting_accounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "currency" varchar(3), "status" varchar(255), "configuration" text, "balance" integer DEFAULT 0, "owner_id" integer, "owner_type" varchar(255), "created_at" datetime, "updated_at" datetime) 
  [1m[36m (1.2ms)[0m  [1mCREATE INDEX "index_accounting_accounts_on_owner_id_and_owner_type" ON "accounting_accounts" ("owner_id", "owner_type")[0m
  [1m[35m (2.0ms)[0m  DROP TABLE "accounting_entries"
  [1m[36m (1.3ms)[0m  [1mCREATE TABLE "accounting_entries" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "amount" integer, "account_id" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (1.2ms)[0m  CREATE INDEX "index_accounting_entries_on_account_id" ON "accounting_entries" ("account_id")
  [1m[36m (4.5ms)[0m  [1mDROP TABLE "accounting_transactions"[0m
  [1m[35m (1.3ms)[0m  CREATE TABLE "accounting_transactions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(255), "category" varchar(255), "code" varchar(255), "description" text, "details" text, "credit_entry_id" integer, "debit_entry_id" integer, "adjustment_transaction_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (1.1ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_adjustment_transaction_id" ON "accounting_transactions" ("adjustment_transaction_id")[0m
  [1m[35m (1.3ms)[0m  CREATE INDEX "index_accounting_transactions_on_category" ON "accounting_transactions" ("category")
  [1m[36m (1.1ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_credit_entry_id" ON "accounting_transactions" ("credit_entry_id")[0m
  [1m[35m (1.1ms)[0m  CREATE INDEX "index_accounting_transactions_on_debit_entry_id" ON "accounting_transactions" ("debit_entry_id")
  [1m[36m (1.1ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_uuid" ON "accounting_transactions" ("uuid")[0m
  [1m[35m (0.5ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (1.9ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:26 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["updated_at", Thu, 03 Oct 2013 20:16:26 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:26 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["updated_at", Thu, 03 Oct 2013 20:16:26 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (4.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:16:26 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:16:26 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.5ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:26 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["updated_at", Thu, 03 Oct 2013 20:16:26 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:26 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["updated_at", Thu, 03 Oct 2013 20:16:26 UTC +00:00]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:16:26 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:16:26 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.3ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Test' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00], ["currency", :GBP], ["name", "Test"], ["updated_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Test' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.3ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["updated_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["updated_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.5ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (4.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["updated_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."id" != 1 AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  UPDATE "accounting_accounts" SET "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["updated_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["updated_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["updated_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'USD') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00], ["currency", :USD], ["name", "Credit"], ["updated_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.8ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["updated_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["updated_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"], ["created_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["updated_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (11.8ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["updated_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (7.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.4ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["updated_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."id" != 1 AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  UPDATE "accounting_accounts" SET "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["updated_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["updated_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Source' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00], ["currency", :GBP], ["name", "Source"], ["updated_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"], ["created_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["updated_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.5ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.1ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "updated_at") VALUES (?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00], ["currency", "GBP"], ["updated_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.4ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "updated_at") VALUES (?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00], ["currency", "GBP"], ["updated_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.4ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (4.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "updated_at") VALUES (?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00], ["currency", "GBP"], ["updated_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:16:27 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.4ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (2.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (22.8ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[36m (3.4ms)[0m  [1mDROP TABLE "accounting_accounts"[0m
  [1m[35m (1.6ms)[0m  CREATE TABLE "accounting_accounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "currency" varchar(3), "status" varchar(255), "configuration" text, "balance" integer DEFAULT 0, "owner_id" integer, "owner_type" varchar(255), "created_at" datetime, "updated_at" datetime) 
  [1m[36m (2.0ms)[0m  [1mCREATE INDEX "index_accounting_accounts_on_owner_id_and_owner_type" ON "accounting_accounts" ("owner_id", "owner_type")[0m
  [1m[35m (2.2ms)[0m  DROP TABLE "accounting_entries"
  [1m[36m (1.8ms)[0m  [1mCREATE TABLE "accounting_entries" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "amount" integer, "account_id" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (1.8ms)[0m  CREATE INDEX "index_accounting_entries_on_account_id" ON "accounting_entries" ("account_id")
  [1m[36m (4.7ms)[0m  [1mDROP TABLE "accounting_transactions"[0m
  [1m[35m (2.7ms)[0m  CREATE TABLE "accounting_transactions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(255), "category" varchar(255), "code" varchar(255), "description" text, "details" text, "credit_entry_id" integer, "debit_entry_id" integer, "adjustment_transaction_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (2.2ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_adjustment_transaction_id" ON "accounting_transactions" ("adjustment_transaction_id")[0m
  [1m[35m (2.1ms)[0m  CREATE INDEX "index_accounting_transactions_on_category" ON "accounting_transactions" ("category")
  [1m[36m (5.3ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_credit_entry_id" ON "accounting_transactions" ("credit_entry_id")[0m
  [1m[35m (3.1ms)[0m  CREATE INDEX "index_accounting_transactions_on_debit_entry_id" ON "accounting_transactions" ("debit_entry_id")
  [1m[36m (1.6ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_uuid" ON "accounting_transactions" ("uuid")[0m
  [1m[35m (2.0ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (0.7ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (7.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20131003200954')
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "updated_at") VALUES (?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00], ["currency", "GBP"], ["updated_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.2ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.3ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "updated_at") VALUES (?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00], ["currency", "GBP"], ["updated_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.3ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "updated_at") VALUES (?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00], ["currency", "GBP"], ["updated_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.4ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["updated_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["updated_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.5ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.3ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"], ["created_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["updated_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["updated_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["updated_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'USD') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00], ["currency", :USD], ["name", "Credit"], ["updated_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.3ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["updated_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."id" != 1 AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "accounting_accounts" SET "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["updated_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["updated_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["updated_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."id" != 1 AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "accounting_accounts" SET "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["updated_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["updated_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.3ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["updated_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["updated_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["updated_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["updated_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.3ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.3ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["updated_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["updated_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.4ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Source' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00], ["currency", :GBP], ["name", "Source"], ["updated_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"], ["created_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["updated_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.5ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Test' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00], ["currency", :GBP], ["name", "Test"], ["updated_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Test' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:16:59 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (3.0ms)[0m  [1mDROP TABLE "accounting_accounts"[0m
  [1m[35m (1.6ms)[0m  CREATE TABLE "accounting_accounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "currency" varchar(3), "status" varchar(255), "configuration" text, "balance" integer DEFAULT 0, "owner_id" integer, "owner_type" varchar(255), "created_at" datetime, "updated_at" datetime) 
  [1m[36m (1.4ms)[0m  [1mCREATE INDEX "index_accounting_accounts_on_owner_id_and_owner_type" ON "accounting_accounts" ("owner_id", "owner_type")[0m
  [1m[35m (2.2ms)[0m  DROP TABLE "accounting_entries"
  [1m[36m (2.3ms)[0m  [1mCREATE TABLE "accounting_entries" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "amount" integer, "account_id" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (1.4ms)[0m  CREATE INDEX "index_accounting_entries_on_account_id" ON "accounting_entries" ("account_id")
  [1m[36m (3.6ms)[0m  [1mDROP TABLE "accounting_transactions"[0m
  [1m[35m (1.4ms)[0m  CREATE TABLE "accounting_transactions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(255), "category" varchar(255), "code" varchar(255), "description" text, "details" text, "credit_entry_id" integer, "debit_entry_id" integer, "adjustment_transaction_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (1.4ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_adjustment_transaction_id" ON "accounting_transactions" ("adjustment_transaction_id")[0m
  [1m[35m (1.2ms)[0m  CREATE INDEX "index_accounting_transactions_on_category" ON "accounting_transactions" ("category")
  [1m[36m (1.9ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_credit_entry_id" ON "accounting_transactions" ("credit_entry_id")[0m
  [1m[35m (1.4ms)[0m  CREATE INDEX "index_accounting_transactions_on_debit_entry_id" ON "accounting_transactions" ("debit_entry_id")
  [1m[36m (1.3ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_uuid" ON "accounting_transactions" ("uuid")[0m
  [1m[35m (1.4ms)[0m  DROP TABLE "users"
  [1m[36m (1.0ms)[0m  [1mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.7ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Source' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (2.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00], ["currency", :GBP], ["name", "Source"], ["updated_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"], ["created_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["updated_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.4ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.3ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["updated_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["updated_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.4ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["updated_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."id" != 1 AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "accounting_accounts" SET "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["updated_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["updated_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["updated_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'USD') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00], ["currency", :USD], ["name", "Credit"], ["updated_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.5ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"], ["created_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["updated_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["updated_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["updated_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["updated_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["updated_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."id" != 1 AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "accounting_accounts" SET "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["updated_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["updated_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Test' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00], ["currency", :GBP], ["name", "Test"], ["updated_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Test' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.3ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["updated_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["updated_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.3ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["updated_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00]]
  [1m[36m (1.8ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["updated_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.5ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "updated_at") VALUES (?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00], ["currency", "GBP"], ["updated_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.2ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "updated_at") VALUES (?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00], ["currency", "GBP"], ["updated_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.3ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "updated_at") VALUES (?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00], ["currency", "GBP"], ["updated_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:22:59 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.4ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (2.7ms)[0m  [1mDROP TABLE "accounting_accounts"[0m
  [1m[35m (1.5ms)[0m  CREATE TABLE "accounting_accounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "currency" varchar(3), "status" varchar(255), "configuration" text, "balance" integer DEFAULT 0, "owner_id" integer, "owner_type" varchar(255), "created_at" datetime, "updated_at" datetime) 
  [1m[36m (1.3ms)[0m  [1mCREATE INDEX "index_accounting_accounts_on_owner_id_and_owner_type" ON "accounting_accounts" ("owner_id", "owner_type")[0m
  [1m[35m (2.2ms)[0m  DROP TABLE "accounting_entries"
  [1m[36m (1.4ms)[0m  [1mCREATE TABLE "accounting_entries" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "amount" integer, "account_id" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (1.2ms)[0m  CREATE INDEX "index_accounting_entries_on_account_id" ON "accounting_entries" ("account_id")
  [1m[36m (3.9ms)[0m  [1mDROP TABLE "accounting_transactions"[0m
  [1m[35m (1.3ms)[0m  CREATE TABLE "accounting_transactions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(255), "category" varchar(255), "code" varchar(255), "description" text, "details" text, "credit_entry_id" integer, "debit_entry_id" integer, "adjustment_transaction_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (1.1ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_adjustment_transaction_id" ON "accounting_transactions" ("adjustment_transaction_id")[0m
  [1m[35m (1.2ms)[0m  CREATE INDEX "index_accounting_transactions_on_category" ON "accounting_transactions" ("category")
  [1m[36m (1.2ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_credit_entry_id" ON "accounting_transactions" ("credit_entry_id")[0m
  [1m[35m (1.0ms)[0m  CREATE INDEX "index_accounting_transactions_on_debit_entry_id" ON "accounting_transactions" ("debit_entry_id")
  [1m[36m (3.7ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_uuid" ON "accounting_transactions" ("uuid")[0m
  [1m[35m (1.5ms)[0m  DROP TABLE "users"
  [1m[36m (0.9ms)[0m  [1mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.5ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (1.4ms)[0m  [1mCREATE TABLE "accounting_accounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "currency" varchar(3), "status" varchar(255), "configuration" text, "balance" integer DEFAULT 0, "owner_id" integer, "owner_type" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (1.0ms)[0m  CREATE INDEX "index_accounting_accounts_on_owner_id_and_owner_type" ON "accounting_accounts" ("owner_id", "owner_type")
  [1m[36m (1.2ms)[0m  [1mCREATE TABLE "accounting_entries" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "amount" integer, "account_id" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (1.0ms)[0m  CREATE INDEX "index_accounting_entries_on_account_id" ON "accounting_entries" ("account_id")
  [1m[36m (1.1ms)[0m  [1mCREATE TABLE "accounting_transactions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(255), "category" varchar(255), "code" varchar(255), "description" text, "details" text, "credit_entry_id" integer, "debit_entry_id" integer, "adjustment_transaction_id" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (1.1ms)[0m  CREATE INDEX "index_accounting_transactions_on_adjustment_transaction_id" ON "accounting_transactions" ("adjustment_transaction_id")
  [1m[36m (1.1ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_category" ON "accounting_transactions" ("category")[0m
  [1m[35m (1.1ms)[0m  CREATE INDEX "index_accounting_transactions_on_credit_entry_id" ON "accounting_transactions" ("credit_entry_id")
  [1m[36m (1.2ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_debit_entry_id" ON "accounting_transactions" ("debit_entry_id")[0m
  [1m[35m (1.2ms)[0m  CREATE INDEX "index_accounting_transactions_on_uuid" ON "accounting_transactions" ("uuid")
  [1m[36m (1.2ms)[0m  [1mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (1.5ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (1.0ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131003200954')[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "updated_at") VALUES (?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00], ["currency", "GBP"], ["updated_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "updated_at") VALUES (?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00], ["currency", "GBP"], ["updated_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "updated_at") VALUES (?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00], ["currency", "GBP"], ["updated_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["updated_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["updated_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"], ["created_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["updated_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["updated_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mAccounting::Account Load (0.0ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.3ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["updated_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["updated_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["updated_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'USD') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00], ["currency", :USD], ["name", "Credit"], ["updated_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["updated_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."id" != 1 AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "accounting_accounts" SET "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["updated_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["updated_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["updated_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."id" != 1 AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "accounting_accounts" SET "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["updated_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["updated_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Test' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00], ["currency", :GBP], ["name", "Test"], ["updated_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Test' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["updated_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["updated_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.3ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["updated_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["updated_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.2ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Source' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00], ["currency", :GBP], ["name", "Source"], ["updated_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"], ["created_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["updated_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:36:06 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.3ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
SQLite3::SQLException: no such column: state: SELECT  "accounting_accounts".* FROM "accounting_accounts"  WHERE "accounting_accounts"."id" = ? AND (state != 'closed')  ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[36m (1.6ms)[0m  [1mDROP TABLE "accounting_accounts"[0m
  [1m[35m (1.6ms)[0m  CREATE TABLE "accounting_accounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "currency" varchar(3), "state" varchar(255), "configuration" text, "balance" integer DEFAULT 0, "owner_id" integer, "owner_type" varchar(255), "created_at" datetime, "updated_at" datetime) 
  [1m[36m (1.9ms)[0m  [1mCREATE INDEX "index_accounting_accounts_on_owner_id_and_owner_type" ON "accounting_accounts" ("owner_id", "owner_type")[0m
  [1m[35m (1.9ms)[0m  DROP TABLE "accounting_entries"
  [1m[36m (1.8ms)[0m  [1mCREATE TABLE "accounting_entries" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "amount" integer, "account_id" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (1.0ms)[0m  CREATE INDEX "index_accounting_entries_on_account_id" ON "accounting_entries" ("account_id")
  [1m[36m (2.0ms)[0m  [1mDROP TABLE "accounting_transactions"[0m
  [1m[35m (1.4ms)[0m  CREATE TABLE "accounting_transactions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(255), "category" varchar(255), "code" varchar(255), "description" text, "details" text, "credit_entry_id" integer, "debit_entry_id" integer, "adjustment_transaction_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (1.3ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_adjustment_transaction_id" ON "accounting_transactions" ("adjustment_transaction_id")[0m
  [1m[35m (1.6ms)[0m  CREATE INDEX "index_accounting_transactions_on_category" ON "accounting_transactions" ("category")
  [1m[36m (1.4ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_credit_entry_id" ON "accounting_transactions" ("credit_entry_id")[0m
  [1m[35m (1.2ms)[0m  CREATE INDEX "index_accounting_transactions_on_debit_entry_id" ON "accounting_transactions" ("debit_entry_id")
  [1m[36m (1.4ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_uuid" ON "accounting_transactions" ("uuid")[0m
  [1m[35m (1.3ms)[0m  DROP TABLE "users"
  [1m[36m (1.1ms)[0m  [1mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (1.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20131003203647')[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "state", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["currency", "GBP"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 500], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "state", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["currency", "GBP"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 500], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "state", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["currency", "GBP"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 500], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "accounting_entries" WHERE "accounting_entries"."account_id" = ?  [["account_id", 1]]
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Source' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["currency", :GBP], ["name", "Source"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", -5000], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 2], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.0ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["credit_entry_id", 2], ["debit_entry_id", 1], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["uuid", "7baf96300e99013112de040ccee136f0"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 2], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2[0m  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 3], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 3]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 3[0m  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["credit_entry_id", 4], ["debit_entry_id", 3], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["uuid", "7bb289e00e99013112df040ccee136f0"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mAccounting::Account Load (0.0ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", -5000], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 2], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["credit_entry_id", 2], ["debit_entry_id", 1], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["uuid", "7bb674700e99013112e0040ccee136f0"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 2], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2[0m  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.0ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)  [["category", "rollback"], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["credit_entry_id", 4], ["debit_entry_id", 3], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["uuid", "7bb850100e99013112e1040ccee136f0"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "accounting_transactions" SET "adjustment_transaction_id" = ?, "updated_at" = ?, "details" = ? WHERE "accounting_transactions"."id" = 1[0m  [["adjustment_transaction_id", 2], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["details", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "accounting_entries" WHERE "accounting_entries"."account_id" = ?[0m  [["account_id", 1]]
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "accounting_entries" WHERE "accounting_entries"."account_id" = ?  [["account_id", 2]]
  [1m[36mAccounting::Transaction Load (0.1ms)[0m  [1mSELECT "accounting_transactions".* FROM "accounting_transactions" ORDER BY "accounting_transactions"."id" DESC LIMIT 1[0m
  [1m[35mAccounting::Transaction Load (0.1ms)[0m  SELECT "accounting_transactions".* FROM "accounting_transactions" ORDER BY "accounting_transactions"."id" DESC LIMIT 1
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", -5000], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 2], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2[0m  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["credit_entry_id", 2], ["debit_entry_id", 1], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["uuid", "7bbe3ad00e99013112e2040ccee136f0"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 2], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["category", "rollback"], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["credit_entry_id", 4], ["debit_entry_id", 3], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["uuid", "7bc0a7000e99013112e3040ccee136f0"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_transactions" SET "adjustment_transaction_id" = ?, "updated_at" = ?, "details" = ? WHERE "accounting_transactions"."id" = 1  [["adjustment_transaction_id", 2], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["details", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", -5000], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 2], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["credit_entry_id", 2], ["debit_entry_id", 1], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["uuid", "7bc532000e99013112e4040ccee136f0"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'USD') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["currency", :USD], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."id" != 1 AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["state", "suspended"], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."id" != 1 AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["state", "closed"], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Test' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["currency", :GBP], ["name", "Test"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Test' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:02 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:37:03 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:03 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:37:03 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:03 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:37:03 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:03 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:37:03 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:03 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:37:03 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:03 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:37:03 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:03 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:37:03 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:03 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:37:03 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:03 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (2.8ms)[0m  [1mDROP TABLE "accounting_accounts"[0m
  [1m[35m (1.5ms)[0m  CREATE TABLE "accounting_accounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "currency" varchar(3), "state" varchar(255), "configuration" text, "balance" integer DEFAULT 0, "owner_id" integer, "owner_type" varchar(255), "created_at" datetime, "updated_at" datetime) 
  [1m[36m (1.1ms)[0m  [1mCREATE INDEX "index_accounting_accounts_on_owner_id_and_owner_type" ON "accounting_accounts" ("owner_id", "owner_type")[0m
  [1m[35m (1.1ms)[0m  DROP TABLE "accounting_entries"
  [1m[36m (1.6ms)[0m  [1mCREATE TABLE "accounting_entries" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "amount" integer, "account_id" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (1.0ms)[0m  CREATE INDEX "index_accounting_entries_on_account_id" ON "accounting_entries" ("account_id")
  [1m[36m (1.2ms)[0m  [1mDROP TABLE "accounting_transactions"[0m
  [1m[35m (1.2ms)[0m  CREATE TABLE "accounting_transactions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(255), "category" varchar(255), "code" varchar(255), "description" text, "details" text, "credit_entry_id" integer, "debit_entry_id" integer, "adjustment_transaction_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (1.1ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_adjustment_transaction_id" ON "accounting_transactions" ("adjustment_transaction_id")[0m
  [1m[35m (1.3ms)[0m  CREATE INDEX "index_accounting_transactions_on_category" ON "accounting_transactions" ("category")
  [1m[36m (1.1ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_credit_entry_id" ON "accounting_transactions" ("credit_entry_id")[0m
  [1m[35m (1.2ms)[0m  CREATE INDEX "index_accounting_transactions_on_debit_entry_id" ON "accounting_transactions" ("debit_entry_id")
  [1m[36m (1.2ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_uuid" ON "accounting_transactions" ("uuid")[0m
  [1m[35m (0.9ms)[0m  DROP TABLE "users"
  [1m[36m (1.0ms)[0m  [1mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.2ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", -5000], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 2], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["credit_entry_id", 2], ["debit_entry_id", 1], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["uuid", "8c5fabd00e99013112e5040ccee136f0"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"], ["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mAccounting::Account Load (0.0ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."id" != 1 AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["state", "closed"], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."id" != 1 AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["state", "suspended"], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'USD') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["currency", :USD], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", -5000], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 2], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2[0m  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["credit_entry_id", 2], ["debit_entry_id", 1], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["uuid", "8c6ea4800e99013112e6040ccee136f0"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 2], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["category", "rollback"], ["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["credit_entry_id", 4], ["debit_entry_id", 3], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["uuid", "8c70f0700e99013112e7040ccee136f0"]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_transactions" SET "adjustment_transaction_id" = ?, "updated_at" = ?, "details" = ? WHERE "accounting_transactions"."id" = 1  [["adjustment_transaction_id", 2], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["details", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mAccounting::Account Load (0.0ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", -5000], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 2], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["credit_entry_id", 2], ["debit_entry_id", 1], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["uuid", "8c75af500e99013112e8040ccee136f0"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 2], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2[0m  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)  [["category", "rollback"], ["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["credit_entry_id", 4], ["debit_entry_id", 3], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["uuid", "8c77f0c00e99013112e9040ccee136f0"]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_transactions" SET "adjustment_transaction_id" = ?, "updated_at" = ?, "details" = ? WHERE "accounting_transactions"."id" = 1[0m  [["adjustment_transaction_id", 2], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["details", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "accounting_entries" WHERE "accounting_entries"."account_id" = ?[0m  [["account_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "accounting_entries" WHERE "accounting_entries"."account_id" = ?  [["account_id", 2]]
  [1m[36mAccounting::Transaction Load (0.2ms)[0m  [1mSELECT "accounting_transactions".* FROM "accounting_transactions" ORDER BY "accounting_transactions"."id" DESC LIMIT 1[0m
  [1m[35mAccounting::Transaction Load (0.2ms)[0m  SELECT "accounting_transactions".* FROM "accounting_transactions" ORDER BY "accounting_transactions"."id" DESC LIMIT 1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Test' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["currency", :GBP], ["name", "Test"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Test' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36m (4.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Source' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["currency", :GBP], ["name", "Source"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"], ["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", -5000], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mAccounting::Account Load (0.0ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 2], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2[0m  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["credit_entry_id", 2], ["debit_entry_id", 1], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["uuid", "8c8990400e99013112ea040ccee136f0"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"], ["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mAccounting::Account Load (0.0ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 2], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 3], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 3]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 3  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["credit_entry_id", 4], ["debit_entry_id", 3], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["uuid", "8c8c8fd00e99013112eb040ccee136f0"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:30 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:37:31 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:31 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:37:31 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:31 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:37:31 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:31 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:37:31 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:31 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:37:31 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:31 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "state", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:31 UTC +00:00], ["currency", "GBP"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:31 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:37:31 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:31 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 500], ["updated_at", Thu, 03 Oct 2013 20:37:31 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "state", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:31 UTC +00:00], ["currency", "GBP"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:31 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:37:31 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:31 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 500], ["updated_at", Thu, 03 Oct 2013 20:37:31 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "accounting_entries" WHERE "accounting_entries"."account_id" = ?[0m  [["account_id", 1]]
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "state", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:31 UTC +00:00], ["currency", "GBP"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:31 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:37:31 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:31 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 500], ["updated_at", Thu, 03 Oct 2013 20:37:31 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (1.6ms)[0m  [1mDROP TABLE "accounting_accounts"[0m
  [1m[35m (1.4ms)[0m  CREATE TABLE "accounting_accounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "currency" varchar(3), "state" varchar(255), "configuration" text, "balance" integer DEFAULT 0, "owner_id" integer, "owner_type" varchar(255), "created_at" datetime, "updated_at" datetime) 
  [1m[36m (1.1ms)[0m  [1mCREATE INDEX "index_accounting_accounts_on_owner_id_and_owner_type" ON "accounting_accounts" ("owner_id", "owner_type")[0m
  [1m[35m (1.2ms)[0m  DROP TABLE "accounting_entries"
  [1m[36m (1.1ms)[0m  [1mCREATE TABLE "accounting_entries" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "amount" integer, "account_id" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (1.0ms)[0m  CREATE INDEX "index_accounting_entries_on_account_id" ON "accounting_entries" ("account_id")
  [1m[36m (1.6ms)[0m  [1mDROP TABLE "accounting_transactions"[0m
  [1m[35m (1.2ms)[0m  CREATE TABLE "accounting_transactions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(255), "category" varchar(255), "code" varchar(255), "description" text, "details" text, "credit_entry_id" integer, "debit_entry_id" integer, "adjustment_transaction_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (1.8ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_adjustment_transaction_id" ON "accounting_transactions" ("adjustment_transaction_id")[0m
  [1m[35m (1.7ms)[0m  CREATE INDEX "index_accounting_transactions_on_category" ON "accounting_transactions" ("category")
  [1m[36m (1.3ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_credit_entry_id" ON "accounting_transactions" ("credit_entry_id")[0m
  [1m[35m (1.3ms)[0m  CREATE INDEX "index_accounting_transactions_on_debit_entry_id" ON "accounting_transactions" ("debit_entry_id")
  [1m[36m (1.4ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_uuid" ON "accounting_transactions" ("uuid")[0m
  [1m[35m (0.9ms)[0m  DROP TABLE "users"
  [1m[36m (1.2ms)[0m  [1mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.2ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "state", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["currency", "GBP"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 500], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "state", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["currency", "GBP"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 500], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "state", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["currency", "GBP"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 500], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "accounting_entries" WHERE "accounting_entries"."account_id" = ?  [["account_id", 1]]
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Source' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["currency", :GBP], ["name", "Source"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"], ["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", -5000], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 2], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.0ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2[0m  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["credit_entry_id", 2], ["debit_entry_id", 1], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["uuid", "9dc322800e99013112f2040ccee136f0"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"], ["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 2], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 3], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 3]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 3  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["credit_entry_id", 4], ["debit_entry_id", 3], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["uuid", "9dc657b00e99013112f3040ccee136f0"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mAccounting::Account Load (0.0ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Test' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["currency", :GBP], ["name", "Test"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Test' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", -5000], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 2], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["credit_entry_id", 2], ["debit_entry_id", 1], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["uuid", "9dceb5300e99013112f4040ccee136f0"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 2], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2[0m  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.0ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)  [["category", "rollback"], ["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["credit_entry_id", 4], ["debit_entry_id", 3], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["uuid", "9dd07bc00e99013112f5040ccee136f0"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "accounting_transactions" SET "adjustment_transaction_id" = ?, "updated_at" = ?, "details" = ? WHERE "accounting_transactions"."id" = 1[0m  [["adjustment_transaction_id", 2], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["details", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "accounting_entries" WHERE "accounting_entries"."account_id" = ?[0m  [["account_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "accounting_entries" WHERE "accounting_entries"."account_id" = ?  [["account_id", 2]]
  [1m[36mAccounting::Transaction Load (0.2ms)[0m  [1mSELECT "accounting_transactions".* FROM "accounting_transactions" ORDER BY "accounting_transactions"."id" DESC LIMIT 1[0m
  [1m[35mAccounting::Transaction Load (0.1ms)[0m  SELECT "accounting_transactions".* FROM "accounting_transactions" ORDER BY "accounting_transactions"."id" DESC LIMIT 1
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", -5000], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 2], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2[0m  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["credit_entry_id", 2], ["debit_entry_id", 1], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["uuid", "9dd5b3800e99013112f6040ccee136f0"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 2], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.0ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["category", "rollback"], ["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["credit_entry_id", 4], ["debit_entry_id", 3], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["uuid", "9dd7b2100e99013112f7040ccee136f0"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_transactions" SET "adjustment_transaction_id" = ?, "updated_at" = ?, "details" = ? WHERE "accounting_transactions"."id" = 1  [["adjustment_transaction_id", 2], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["details", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.0ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mAccounting::Account Load (0.0ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", -5000], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mAccounting::Account Load (0.0ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 2], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:37:59 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:38:00 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:38:00 UTC +00:00], ["credit_entry_id", 2], ["debit_entry_id", 1], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:38:00 UTC +00:00], ["uuid", "9ddc11500e99013112f8040ccee136f0"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:38:00 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:38:00 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."id" != 1 AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["state", "suspended"], ["updated_at", Thu, 03 Oct 2013 20:38:00 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:38:00 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:38:00 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.3ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:38:00 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:38:00 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:38:00 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:38:00 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:38:00 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:38:00 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'USD') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:38:00 UTC +00:00], ["currency", :USD], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:38:00 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.3ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:38:00 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:38:00 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."id" != 1 AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["state", "closed"], ["updated_at", Thu, 03 Oct 2013 20:38:00 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:38:00 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:38:00 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"], ["created_at", Thu, 03 Oct 2013 20:38:00 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:38:00 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:38:00 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:38:00 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[36m (3.0ms)[0m  [1mDROP TABLE "accounting_accounts"[0m
  [1m[35m (1.5ms)[0m  CREATE TABLE "accounting_accounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "currency" varchar(3), "state" varchar(255), "configuration" text, "balance" integer DEFAULT 0, "owner_id" integer, "owner_type" varchar(255), "created_at" datetime, "updated_at" datetime) 
  [1m[36m (1.3ms)[0m  [1mCREATE INDEX "index_accounting_accounts_on_owner_id_and_owner_type" ON "accounting_accounts" ("owner_id", "owner_type")[0m
  [1m[35m (2.1ms)[0m  DROP TABLE "accounting_entries"
  [1m[36m (1.4ms)[0m  [1mCREATE TABLE "accounting_entries" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "amount" integer, "account_id" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (1.1ms)[0m  CREATE INDEX "index_accounting_entries_on_account_id" ON "accounting_entries" ("account_id")
  [1m[36m (3.4ms)[0m  [1mDROP TABLE "accounting_transactions"[0m
  [1m[35m (2.1ms)[0m  CREATE TABLE "accounting_transactions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(255), "category" varchar(255), "code" varchar(255), "description" text, "details" text, "credit_entry_id" integer, "debit_entry_id" integer, "adjustment_transaction_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (1.4ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_adjustment_transaction_id" ON "accounting_transactions" ("adjustment_transaction_id")[0m
  [1m[35m (1.2ms)[0m  CREATE INDEX "index_accounting_transactions_on_category" ON "accounting_transactions" ("category")
  [1m[36m (1.1ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_credit_entry_id" ON "accounting_transactions" ("credit_entry_id")[0m
  [1m[35m (1.0ms)[0m  CREATE INDEX "index_accounting_transactions_on_debit_entry_id" ON "accounting_transactions" ("debit_entry_id")
  [1m[36m (1.1ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_uuid" ON "accounting_transactions" ("uuid")[0m
  [1m[35m (1.3ms)[0m  DROP TABLE "users"
  [1m[36m (0.9ms)[0m  [1mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.5ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Test' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (2.2ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["currency", :GBP], ["name", "Test"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Test' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (1.7ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.3ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", -5000], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 2], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["credit_entry_id", 2], ["debit_entry_id", 1], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["uuid", "ea8b82700e99013112fc040ccee136f0"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 2], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2[0m  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mAccounting::Account Load (0.0ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)  [["category", "rollback"], ["created_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["credit_entry_id", 4], ["debit_entry_id", 3], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["uuid", "ea8deb500e99013112fd040ccee136f0"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "accounting_transactions" SET "adjustment_transaction_id" = ?, "updated_at" = ?, "details" = ? WHERE "accounting_transactions"."id" = 1[0m  [["adjustment_transaction_id", 2], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["details", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "accounting_entries" WHERE "accounting_entries"."account_id" = ?[0m  [["account_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "accounting_entries" WHERE "accounting_entries"."account_id" = ?  [["account_id", 2]]
  [1m[36mAccounting::Transaction Load (0.1ms)[0m  [1mSELECT "accounting_transactions".* FROM "accounting_transactions" ORDER BY "accounting_transactions"."id" DESC LIMIT 1[0m
  [1m[35mAccounting::Transaction Load (0.1ms)[0m  SELECT "accounting_transactions".* FROM "accounting_transactions" ORDER BY "accounting_transactions"."id" DESC LIMIT 1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", -5000], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 2], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2[0m  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["credit_entry_id", 2], ["debit_entry_id", 1], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["uuid", "ea932bd00e99013112fe040ccee136f0"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.0ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 2], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mAccounting::Account Load (0.0ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["category", "rollback"], ["created_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["credit_entry_id", 4], ["debit_entry_id", 3], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["uuid", "ea9529200e99013112ff040ccee136f0"]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_transactions" SET "adjustment_transaction_id" = ?, "updated_at" = ?, "details" = ? WHERE "accounting_transactions"."id" = 1  [["adjustment_transaction_id", 2], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["details", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", -5000], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 2], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["credit_entry_id", 2], ["debit_entry_id", 1], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["uuid", "ea9a38600e9901311300040ccee136f0"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."id" != 1 AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["state", "closed"], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"], ["created_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.3ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'USD') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["currency", :USD], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."id" != 1 AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["state", "suspended"], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Source' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["currency", :GBP], ["name", "Source"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"], ["created_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", -5000], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mAccounting::Account Load (0.0ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 2], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["credit_entry_id", 2], ["debit_entry_id", 1], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["uuid", "eaab8bd00e9901311301040ccee136f0"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"], ["created_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mAccounting::Account Load (0.0ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 2], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2[0m  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 3], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 3]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 3[0m  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["credit_entry_id", 4], ["debit_entry_id", 3], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:40:08 UTC +00:00], ["uuid", "eaaf85800e9901311302040ccee136f0"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "state", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:40:09 UTC +00:00], ["currency", "GBP"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:40:09 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:40:09 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:40:09 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 500], ["updated_at", Thu, 03 Oct 2013 20:40:09 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "accounting_entries" WHERE "accounting_entries"."account_id" = ?[0m  [["account_id", 1]]
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "state", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:40:09 UTC +00:00], ["currency", "GBP"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:40:09 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:40:09 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:40:09 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 500], ["updated_at", Thu, 03 Oct 2013 20:40:09 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "state", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:40:09 UTC +00:00], ["currency", "GBP"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:40:09 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:40:09 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:40:09 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 500], ["updated_at", Thu, 03 Oct 2013 20:40:09 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:40:09 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:40:09 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:40:09 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:40:09 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:40:09 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:40:09 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:40:09 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:40:09 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:40:09 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:40:09 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:40:09 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:40:09 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:40:09 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:40:09 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:40:09 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:40:09 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:40:09 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:40:09 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (7.1ms)[0m  [1mDROP TABLE "accounting_accounts"[0m
  [1m[35m (3.9ms)[0m  CREATE TABLE "accounting_accounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "currency" varchar(3), "state" varchar(255), "configuration" text, "balance" integer DEFAULT 0, "owner_id" integer, "owner_type" varchar(255), "created_at" datetime, "updated_at" datetime) 
  [1m[36m (3.8ms)[0m  [1mCREATE INDEX "index_accounting_accounts_on_owner_id_and_owner_type" ON "accounting_accounts" ("owner_id", "owner_type")[0m
  [1m[35m (1.5ms)[0m  DROP TABLE "accounting_entries"
  [1m[36m (1.2ms)[0m  [1mCREATE TABLE "accounting_entries" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "amount" integer, "account_id" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (1.1ms)[0m  CREATE INDEX "index_accounting_entries_on_account_id" ON "accounting_entries" ("account_id")
  [1m[36m (1.4ms)[0m  [1mDROP TABLE "accounting_transactions"[0m
  [1m[35m (1.1ms)[0m  CREATE TABLE "accounting_transactions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(255), "category" varchar(255), "code" varchar(255), "description" text, "details" text, "credit_entry_id" integer, "debit_entry_id" integer, "adjustment_transaction_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (1.0ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_adjustment_transaction_id" ON "accounting_transactions" ("adjustment_transaction_id")[0m
  [1m[35m (1.0ms)[0m  CREATE INDEX "index_accounting_transactions_on_category" ON "accounting_transactions" ("category")
  [1m[36m (1.0ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_credit_entry_id" ON "accounting_transactions" ("credit_entry_id")[0m
  [1m[35m (1.0ms)[0m  CREATE INDEX "index_accounting_transactions_on_debit_entry_id" ON "accounting_transactions" ("debit_entry_id")
  [1m[36m (1.0ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_uuid" ON "accounting_transactions" ("uuid")[0m
  [1m[35m (0.9ms)[0m  DROP TABLE "users"
  [1m[36m (0.8ms)[0m  [1mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:41:10 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:41:10 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (31.9ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:41:10 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:41:10 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "created_at" = '2013-09-03 20:41:10.891985' WHERE "accounting_accounts"."id" = 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 765], ["created_at", Tue, 03 Sep 2013 20:41:10 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:41:10 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.8ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 765], ["updated_at", Tue, 03 Sep 2013 20:41:10 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 927], ["created_at", Tue, 03 Sep 2013 20:41:10 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:41:10 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 1692], ["updated_at", Tue, 03 Sep 2013 20:41:10 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 123], ["created_at", Tue, 03 Sep 2013 20:41:10 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:41:10 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 1815], ["updated_at", Tue, 03 Sep 2013 20:41:10 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -1239], ["created_at", Tue, 03 Sep 2013 20:41:10 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:41:10 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 576], ["updated_at", Tue, 03 Sep 2013 20:41:10 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 212], ["created_at", Tue, 03 Sep 2013 20:41:10 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:41:10 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 788], ["updated_at", Tue, 03 Sep 2013 20:41:10 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -232], ["created_at", Tue, 03 Sep 2013 20:41:10 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:41:10 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 556], ["updated_at", Tue, 03 Sep 2013 20:41:10 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 23], ["created_at", Fri, 13 Sep 2013 20:41:10 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:41:10 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 579], ["updated_at", Fri, 13 Sep 2013 20:41:10 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 123], ["created_at", Fri, 13 Sep 2013 20:41:10 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:41:10 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 702], ["updated_at", Fri, 13 Sep 2013 20:41:10 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 145], ["created_at", Fri, 13 Sep 2013 20:41:10 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:41:10 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 847], ["updated_at", Fri, 13 Sep 2013 20:41:10 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 7864], ["created_at", Fri, 13 Sep 2013 20:41:10 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:41:10 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 8711], ["updated_at", Fri, 13 Sep 2013 20:41:10 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -7231], ["created_at", Fri, 13 Sep 2013 20:41:10 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:41:10 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 1480], ["updated_at", Fri, 13 Sep 2013 20:41:10 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccounting::Entry Load (0.2ms)[0m  SELECT "accounting_entries".* FROM "accounting_entries" WHERE "accounting_entries"."account_id" = ? AND ("accounting_entries"."created_at" BETWEEN '2013-09-12 20:41:11.000619' AND '2013-10-03 20:41:11.000686') ORDER BY accounting_entries.created_at DESC  [["account_id", 1]]
  [1m[36mAccounting::Account Load (0.3ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" IN (1) AND (state != 'closed')[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["state", "closed"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 2 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["currency", :GBP], ["owner_id", 2], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.3ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE ("accounting_accounts"."state" IN ('closed'))[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["state", "closed"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 2 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["currency", :GBP], ["owner_id", 2], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE (state != 'closed')[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  UPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["state", "closed"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = 123 WHERE "accounting_accounts"."id" = 1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["state", "suspended"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["state", "closed"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["state", "suspended"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "created_at" = '2013-09-03 20:41:11.221200' WHERE "accounting_accounts"."id" = 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 765], ["created_at", Tue, 03 Sep 2013 20:41:11 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:41:11 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 765], ["updated_at", Tue, 03 Sep 2013 20:41:11 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 927], ["created_at", Tue, 03 Sep 2013 20:41:11 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:41:11 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 1692], ["updated_at", Tue, 03 Sep 2013 20:41:11 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 123], ["created_at", Tue, 03 Sep 2013 20:41:11 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:41:11 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 1815], ["updated_at", Tue, 03 Sep 2013 20:41:11 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -1239], ["created_at", Tue, 03 Sep 2013 20:41:11 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:41:11 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 576], ["updated_at", Tue, 03 Sep 2013 20:41:11 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 212], ["created_at", Tue, 03 Sep 2013 20:41:11 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:41:11 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 788], ["updated_at", Tue, 03 Sep 2013 20:41:11 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -232], ["created_at", Tue, 03 Sep 2013 20:41:11 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:41:11 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 556], ["updated_at", Tue, 03 Sep 2013 20:41:11 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 23], ["created_at", Fri, 13 Sep 2013 20:41:11 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:41:11 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 579], ["updated_at", Fri, 13 Sep 2013 20:41:11 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 123], ["created_at", Fri, 13 Sep 2013 20:41:11 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:41:11 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 702], ["updated_at", Fri, 13 Sep 2013 20:41:11 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 145], ["created_at", Fri, 13 Sep 2013 20:41:11 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:41:11 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 847], ["updated_at", Fri, 13 Sep 2013 20:41:11 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 7864], ["created_at", Fri, 13 Sep 2013 20:41:11 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:41:11 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 8711], ["updated_at", Fri, 13 Sep 2013 20:41:11 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -7231], ["created_at", Fri, 13 Sep 2013 20:41:11 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:41:11 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 1480], ["updated_at", Fri, 13 Sep 2013 20:41:11 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccounting::Entry Load (0.3ms)[0m  SELECT "accounting_entries".* FROM "accounting_entries" WHERE "accounting_entries"."account_id" = ? AND (created_at >= '2013-09-04 20:41:11.294851') ORDER BY accounting_entries.created_at DESC  [["account_id", 1]]
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" IN (1) AND (state != 'closed')[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "state", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["currency", "GBP"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 500], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "accounting_entries" WHERE "accounting_entries"."account_id" = ?[0m  [["account_id", 1]]
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "state", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["currency", "GBP"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 500], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "state", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["currency", "GBP"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 500], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", -5000], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 2], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["credit_entry_id", 2], ["debit_entry_id", 1], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["uuid", "1000b6400e9a01311303040ccee136f0"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 2], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2[0m  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)  [["category", "rollback"], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["credit_entry_id", 4], ["debit_entry_id", 3], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["uuid", "1003c8f00e9a01311304040ccee136f0"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "accounting_transactions" SET "adjustment_transaction_id" = ?, "updated_at" = ?, "details" = ? WHERE "accounting_transactions"."id" = 1[0m  [["adjustment_transaction_id", 2], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["details", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "accounting_entries" WHERE "accounting_entries"."account_id" = ?[0m  [["account_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "accounting_entries" WHERE "accounting_entries"."account_id" = ?  [["account_id", 2]]
  [1m[36mAccounting::Transaction Load (0.1ms)[0m  [1mSELECT "accounting_transactions".* FROM "accounting_transactions" ORDER BY "accounting_transactions"."id" DESC LIMIT 1[0m
  [1m[35mAccounting::Transaction Load (0.1ms)[0m  SELECT "accounting_transactions".* FROM "accounting_transactions" ORDER BY "accounting_transactions"."id" DESC LIMIT 1
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", -5000], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mAccounting::Account Load (0.0ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 2], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.0ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2[0m  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["credit_entry_id", 2], ["debit_entry_id", 1], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["uuid", "1008ada00e9a01311305040ccee136f0"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 2], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mAccounting::Account Load (0.0ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["category", "rollback"], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["credit_entry_id", 4], ["debit_entry_id", 3], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["uuid", "100aa5b00e9a01311306040ccee136f0"]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_transactions" SET "adjustment_transaction_id" = ?, "updated_at" = ?, "details" = ? WHERE "accounting_transactions"."id" = 1  [["adjustment_transaction_id", 2], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["details", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", -5000], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 2], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["credit_entry_id", 2], ["debit_entry_id", 1], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["uuid", "101041b00e9a01311307040ccee136f0"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."id" != 1 AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["state", "closed"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'USD') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["currency", :USD], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."id" != 1 AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["state", "suspended"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.2ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Test' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["currency", :GBP], ["name", "Test"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Test' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Source' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["currency", :GBP], ["name", "Source"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", -5000], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 2], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2[0m  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["credit_entry_id", 2], ["debit_entry_id", 1], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["uuid", "10237c600e9a01311308040ccee136f0"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 2], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 3], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 3]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 3  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["credit_entry_id", 4], ["debit_entry_id", 3], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:41:11 UTC +00:00], ["uuid", "10267fe00e9a01311309040ccee136f0"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mAccounting::Account Load (0.0ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (1.5ms)[0m  [1mDROP TABLE "accounting_accounts"[0m
  [1m[35m (1.5ms)[0m  CREATE TABLE "accounting_accounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "currency" varchar(3), "state" varchar(255), "configuration" text, "balance" integer DEFAULT 0, "owner_id" integer, "owner_type" varchar(255), "created_at" datetime, "updated_at" datetime) 
  [1m[36m (1.2ms)[0m  [1mCREATE INDEX "index_accounting_accounts_on_owner_id_and_owner_type" ON "accounting_accounts" ("owner_id", "owner_type")[0m
  [1m[35m (1.2ms)[0m  DROP TABLE "accounting_entries"
  [1m[36m (1.1ms)[0m  [1mCREATE TABLE "accounting_entries" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "amount" integer, "account_id" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (1.2ms)[0m  CREATE INDEX "index_accounting_entries_on_account_id" ON "accounting_entries" ("account_id")
  [1m[36m (1.5ms)[0m  [1mDROP TABLE "accounting_transactions"[0m
  [1m[35m (1.3ms)[0m  CREATE TABLE "accounting_transactions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(255), "category" varchar(255), "code" varchar(255), "description" text, "details" text, "credit_entry_id" integer, "debit_entry_id" integer, "adjustment_transaction_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (1.3ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_adjustment_transaction_id" ON "accounting_transactions" ("adjustment_transaction_id")[0m
  [1m[35m (1.5ms)[0m  CREATE INDEX "index_accounting_transactions_on_category" ON "accounting_transactions" ("category")
  [1m[36m (1.6ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_credit_entry_id" ON "accounting_transactions" ("credit_entry_id")[0m
  [1m[35m (1.4ms)[0m  CREATE INDEX "index_accounting_transactions_on_debit_entry_id" ON "accounting_transactions" ("debit_entry_id")
  [1m[36m (1.0ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_uuid" ON "accounting_transactions" ("uuid")[0m
  [1m[35m (1.0ms)[0m  DROP TABLE "users"
  [1m[36m (0.9ms)[0m  [1mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.2ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:43:05 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:05 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:05 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:05 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["state", "suspended"], ["updated_at", Thu, 03 Oct 2013 20:43:05 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:43:05 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:05 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:05 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:05 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["state", "closed"], ["updated_at", Thu, 03 Oct 2013 20:43:05 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:43:05 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:05 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 2 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:05 UTC +00:00], ["currency", :GBP], ["owner_id", 2], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:05 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE ("accounting_accounts"."state" IN ('closed'))[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "created_at" = '2013-09-03 20:43:06.007742' WHERE "accounting_accounts"."id" = 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 765], ["created_at", Tue, 03 Sep 2013 20:43:06 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:43:06 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.3ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 765], ["updated_at", Tue, 03 Sep 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 927], ["created_at", Tue, 03 Sep 2013 20:43:06 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:43:06 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 1692], ["updated_at", Tue, 03 Sep 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 123], ["created_at", Tue, 03 Sep 2013 20:43:06 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:43:06 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 1815], ["updated_at", Tue, 03 Sep 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -1239], ["created_at", Tue, 03 Sep 2013 20:43:06 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:43:06 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 576], ["updated_at", Tue, 03 Sep 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 212], ["created_at", Tue, 03 Sep 2013 20:43:06 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:43:06 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 788], ["updated_at", Tue, 03 Sep 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -232], ["created_at", Tue, 03 Sep 2013 20:43:06 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:43:06 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 556], ["updated_at", Tue, 03 Sep 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 23], ["created_at", Fri, 13 Sep 2013 20:43:06 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:43:06 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 579], ["updated_at", Fri, 13 Sep 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 123], ["created_at", Fri, 13 Sep 2013 20:43:06 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:43:06 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 702], ["updated_at", Fri, 13 Sep 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 145], ["created_at", Fri, 13 Sep 2013 20:43:06 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:43:06 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 847], ["updated_at", Fri, 13 Sep 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 7864], ["created_at", Fri, 13 Sep 2013 20:43:06 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:43:06 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 8711], ["updated_at", Fri, 13 Sep 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -7231], ["created_at", Fri, 13 Sep 2013 20:43:06 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:43:06 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 1480], ["updated_at", Fri, 13 Sep 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccounting::Entry Load (0.2ms)[0m  SELECT "accounting_entries".* FROM "accounting_entries" WHERE "accounting_entries"."account_id" = ? AND ("accounting_entries"."created_at" BETWEEN '2013-09-12 20:43:06.122631' AND '2013-10-03 20:43:06.122700') ORDER BY accounting_entries.created_at DESC  [["account_id", 1]]
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" IN (1) AND (state != 'closed')[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "created_at" = '2013-09-03 20:43:06.185395' WHERE "accounting_accounts"."id" = 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 765], ["created_at", Tue, 03 Sep 2013 20:43:06 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:43:06 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 765], ["updated_at", Tue, 03 Sep 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 927], ["created_at", Tue, 03 Sep 2013 20:43:06 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:43:06 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 1692], ["updated_at", Tue, 03 Sep 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 123], ["created_at", Tue, 03 Sep 2013 20:43:06 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:43:06 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 1815], ["updated_at", Tue, 03 Sep 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -1239], ["created_at", Tue, 03 Sep 2013 20:43:06 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:43:06 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 576], ["updated_at", Tue, 03 Sep 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 212], ["created_at", Tue, 03 Sep 2013 20:43:06 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:43:06 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 788], ["updated_at", Tue, 03 Sep 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -232], ["created_at", Tue, 03 Sep 2013 20:43:06 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:43:06 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 556], ["updated_at", Tue, 03 Sep 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 23], ["created_at", Fri, 13 Sep 2013 20:43:06 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:43:06 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 579], ["updated_at", Fri, 13 Sep 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 123], ["created_at", Fri, 13 Sep 2013 20:43:06 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:43:06 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 702], ["updated_at", Fri, 13 Sep 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 145], ["created_at", Fri, 13 Sep 2013 20:43:06 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:43:06 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 847], ["updated_at", Fri, 13 Sep 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 7864], ["created_at", Fri, 13 Sep 2013 20:43:06 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:43:06 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 8711], ["updated_at", Fri, 13 Sep 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -7231], ["created_at", Fri, 13 Sep 2013 20:43:06 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:43:06 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 1480], ["updated_at", Fri, 13 Sep 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccounting::Entry Load (0.2ms)[0m  SELECT "accounting_entries".* FROM "accounting_entries" WHERE "accounting_entries"."account_id" = ? AND (created_at >= '2013-09-04 20:43:06.258502') ORDER BY accounting_entries.created_at DESC  [["account_id", 1]]
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" IN (1) AND (state != 'closed')[0m
  [1m[35m (1.9ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["state", "closed"], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["state", "suspended"], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["state", "closed"], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 2 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["currency", :GBP], ["owner_id", 2], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE (state != 'closed')[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = 123 WHERE "accounting_accounts"."id" = 1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["state", "closed"], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "state", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["currency", "GBP"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 500], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "accounting_entries" WHERE "accounting_entries"."account_id" = ?[0m  [["account_id", 1]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "state", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["currency", "GBP"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 500], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "state", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["currency", "GBP"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 500], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Source' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["currency", :GBP], ["name", "Source"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", -5000], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 2], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"]]
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["credit_entry_id", 2], ["debit_entry_id", 1], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["uuid", "549f35300e9a01311310040ccee136f0"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 2], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2[0m  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 3], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 3]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 3[0m  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["credit_entry_id", 4], ["debit_entry_id", 3], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["uuid", "54a275000e9a01311311040ccee136f0"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", -5000], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 2], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2[0m  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["credit_entry_id", 2], ["debit_entry_id", 1], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["uuid", "54a7b6600e9a01311312040ccee136f0"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."id" != 1 AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["state", "suspended"], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'USD') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["currency", :USD], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.6ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."id" != 1 AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["state", "closed"], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", -5000], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 2], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["credit_entry_id", 2], ["debit_entry_id", 1], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["uuid", "54bd2f100e9a01311313040ccee136f0"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 2], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2[0m  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.0ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)  [["category", "rollback"], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["credit_entry_id", 4], ["debit_entry_id", 3], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["uuid", "54bf11400e9a01311314040ccee136f0"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "accounting_transactions" SET "adjustment_transaction_id" = ?, "updated_at" = ?, "details" = ? WHERE "accounting_transactions"."id" = 1[0m  [["adjustment_transaction_id", 2], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["details", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", -5000], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 2], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2[0m  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["credit_entry_id", 2], ["debit_entry_id", 1], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["uuid", "54c396800e9a01311315040ccee136f0"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 2], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mAccounting::Account Load (0.0ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["category", "rollback"], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["credit_entry_id", 4], ["debit_entry_id", 3], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["uuid", "54c58c000e9a01311316040ccee136f0"]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_transactions" SET "adjustment_transaction_id" = ?, "updated_at" = ?, "details" = ? WHERE "accounting_transactions"."id" = 1  [["adjustment_transaction_id", 2], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["details", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "accounting_entries" WHERE "accounting_entries"."account_id" = ?  [["account_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "accounting_entries" WHERE "accounting_entries"."account_id" = ?[0m  [["account_id", 2]]
  [1m[35mAccounting::Transaction Load (0.1ms)[0m  SELECT "accounting_transactions".* FROM "accounting_transactions" ORDER BY "accounting_transactions"."id" DESC LIMIT 1
  [1m[36mAccounting::Transaction Load (0.1ms)[0m  [1mSELECT "accounting_transactions".* FROM "accounting_transactions" ORDER BY "accounting_transactions"."id" DESC LIMIT 1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Test' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00], ["currency", :GBP], ["name", "Test"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:06 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Test' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[36m (2.8ms)[0m  [1mDROP TABLE "accounting_accounts"[0m
  [1m[35m (1.5ms)[0m  CREATE TABLE "accounting_accounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "currency" varchar(3), "state" varchar(255), "configuration" text, "balance" integer DEFAULT 0, "owner_id" integer, "owner_type" varchar(255), "created_at" datetime, "updated_at" datetime) 
  [1m[36m (1.2ms)[0m  [1mCREATE INDEX "index_accounting_accounts_on_owner_id_and_owner_type" ON "accounting_accounts" ("owner_id", "owner_type")[0m
  [1m[35m (1.2ms)[0m  DROP TABLE "accounting_entries"
  [1m[36m (1.2ms)[0m  [1mCREATE TABLE "accounting_entries" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "amount" integer, "account_id" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (1.0ms)[0m  CREATE INDEX "index_accounting_entries_on_account_id" ON "accounting_entries" ("account_id")
  [1m[36m (1.9ms)[0m  [1mDROP TABLE "accounting_transactions"[0m
  [1m[35m (1.4ms)[0m  CREATE TABLE "accounting_transactions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(255), "category" varchar(255), "code" varchar(255), "description" text, "details" text, "credit_entry_id" integer, "debit_entry_id" integer, "adjustment_transaction_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (1.1ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_adjustment_transaction_id" ON "accounting_transactions" ("adjustment_transaction_id")[0m
  [1m[35m (1.3ms)[0m  CREATE INDEX "index_accounting_transactions_on_category" ON "accounting_transactions" ("category")
  [1m[36m (1.2ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_credit_entry_id" ON "accounting_transactions" ("credit_entry_id")[0m
  [1m[35m (1.4ms)[0m  CREATE INDEX "index_accounting_transactions_on_debit_entry_id" ON "accounting_transactions" ("debit_entry_id")
  [1m[36m (1.1ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_uuid" ON "accounting_transactions" ("uuid")[0m
  [1m[35m (0.9ms)[0m  DROP TABLE "users"
  [1m[36m (1.0ms)[0m  [1mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.2ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.9ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["state", "closed"], ["updated_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 2 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00], ["currency", :GBP], ["owner_id", 2], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE (state != 'closed')[0m
  [1m[35m (2.2ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["state", "closed"], ["updated_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 2 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00], ["currency", :GBP], ["owner_id", 2], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE ("accounting_accounts"."state" IN ('closed'))[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["state", "suspended"], ["updated_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["state", "closed"], ["updated_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "created_at" = '2013-09-03 20:43:18.730769' WHERE "accounting_accounts"."id" = 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 765], ["created_at", Tue, 03 Sep 2013 20:43:18 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:43:18 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 765], ["updated_at", Tue, 03 Sep 2013 20:43:18 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 927], ["created_at", Tue, 03 Sep 2013 20:43:18 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:43:18 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 1692], ["updated_at", Tue, 03 Sep 2013 20:43:18 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.3ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 123], ["created_at", Tue, 03 Sep 2013 20:43:18 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:43:18 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 1815], ["updated_at", Tue, 03 Sep 2013 20:43:18 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -1239], ["created_at", Tue, 03 Sep 2013 20:43:18 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:43:18 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 576], ["updated_at", Tue, 03 Sep 2013 20:43:18 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 212], ["created_at", Tue, 03 Sep 2013 20:43:18 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:43:18 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 788], ["updated_at", Tue, 03 Sep 2013 20:43:18 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -232], ["created_at", Tue, 03 Sep 2013 20:43:18 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:43:18 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 556], ["updated_at", Tue, 03 Sep 2013 20:43:18 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 23], ["created_at", Fri, 13 Sep 2013 20:43:18 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:43:18 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 579], ["updated_at", Fri, 13 Sep 2013 20:43:18 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 123], ["created_at", Fri, 13 Sep 2013 20:43:18 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:43:18 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 702], ["updated_at", Fri, 13 Sep 2013 20:43:18 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 145], ["created_at", Fri, 13 Sep 2013 20:43:18 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:43:18 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 847], ["updated_at", Fri, 13 Sep 2013 20:43:18 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 7864], ["created_at", Fri, 13 Sep 2013 20:43:18 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:43:18 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 8711], ["updated_at", Fri, 13 Sep 2013 20:43:18 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -7231], ["created_at", Fri, 13 Sep 2013 20:43:18 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:43:18 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 1480], ["updated_at", Fri, 13 Sep 2013 20:43:18 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccounting::Entry Load (0.2ms)[0m  SELECT "accounting_entries".* FROM "accounting_entries" WHERE "accounting_entries"."account_id" = ? AND (created_at >= '2013-09-04 20:43:18.827664') ORDER BY accounting_entries.created_at DESC  [["account_id", 1]]
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" IN (1) AND (state != 'closed')[0m
  [1m[35m (1.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["state", "suspended"], ["updated_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "created_at" = '2013-09-03 20:43:18.861593' WHERE "accounting_accounts"."id" = 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 765], ["created_at", Tue, 03 Sep 2013 20:43:18 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:43:18 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 765], ["updated_at", Tue, 03 Sep 2013 20:43:18 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 927], ["created_at", Tue, 03 Sep 2013 20:43:18 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:43:18 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 1692], ["updated_at", Tue, 03 Sep 2013 20:43:18 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 123], ["created_at", Tue, 03 Sep 2013 20:43:18 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:43:18 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 1815], ["updated_at", Tue, 03 Sep 2013 20:43:18 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -1239], ["created_at", Tue, 03 Sep 2013 20:43:18 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:43:18 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 576], ["updated_at", Tue, 03 Sep 2013 20:43:18 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 212], ["created_at", Tue, 03 Sep 2013 20:43:18 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:43:18 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 788], ["updated_at", Tue, 03 Sep 2013 20:43:18 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -232], ["created_at", Tue, 03 Sep 2013 20:43:18 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:43:18 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 556], ["updated_at", Tue, 03 Sep 2013 20:43:18 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 23], ["created_at", Fri, 13 Sep 2013 20:43:18 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:43:18 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 579], ["updated_at", Fri, 13 Sep 2013 20:43:18 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 123], ["created_at", Fri, 13 Sep 2013 20:43:18 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:43:18 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 702], ["updated_at", Fri, 13 Sep 2013 20:43:18 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 145], ["created_at", Fri, 13 Sep 2013 20:43:18 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:43:18 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 847], ["updated_at", Fri, 13 Sep 2013 20:43:18 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 7864], ["created_at", Fri, 13 Sep 2013 20:43:18 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:43:18 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 8711], ["updated_at", Fri, 13 Sep 2013 20:43:18 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -7231], ["created_at", Fri, 13 Sep 2013 20:43:18 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:43:18 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 1480], ["updated_at", Fri, 13 Sep 2013 20:43:18 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccounting::Entry Load (0.2ms)[0m  SELECT "accounting_entries".* FROM "accounting_entries" WHERE "accounting_entries"."account_id" = ? AND ("accounting_entries"."created_at" BETWEEN '2013-09-12 20:43:18.936649' AND '2013-10-03 20:43:18.936800') ORDER BY accounting_entries.created_at DESC  [["account_id", 1]]
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" IN (1) AND (state != 'closed')[0m
  [1m[35m (1.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["state", "closed"], ["updated_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:18 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = 123 WHERE "accounting_accounts"."id" = 1[0m
  [1m[35m (1.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "state", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["currency", "GBP"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 500], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "accounting_entries" WHERE "accounting_entries"."account_id" = ?[0m  [["account_id", 1]]
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "state", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["currency", "GBP"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 500], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "state", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["currency", "GBP"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 500], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Test' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["currency", :GBP], ["name", "Test"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Test' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", -5000], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 2], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2[0m  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["credit_entry_id", 2], ["debit_entry_id", 1], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["uuid", "5c2cc0c00e9a0131131a040ccee136f0"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 2], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mAccounting::Account Load (0.0ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["category", "rollback"], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["credit_entry_id", 4], ["debit_entry_id", 3], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["uuid", "5c2f49100e9a0131131b040ccee136f0"]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "accounting_transactions" SET "adjustment_transaction_id" = ?, "updated_at" = ?, "details" = ? WHERE "accounting_transactions"."id" = 1  [["adjustment_transaction_id", 2], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["details", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "accounting_entries" WHERE "accounting_entries"."account_id" = ?  [["account_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "accounting_entries" WHERE "accounting_entries"."account_id" = ?[0m  [["account_id", 2]]
  [1m[35mAccounting::Transaction Load (0.1ms)[0m  SELECT "accounting_transactions".* FROM "accounting_transactions" ORDER BY "accounting_transactions"."id" DESC LIMIT 1
  [1m[36mAccounting::Transaction Load (0.1ms)[0m  [1mSELECT "accounting_transactions".* FROM "accounting_transactions" ORDER BY "accounting_transactions"."id" DESC LIMIT 1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", -5000], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 2], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["credit_entry_id", 2], ["debit_entry_id", 1], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["uuid", "5c345d500e9a0131131c040ccee136f0"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 2], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2[0m  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mAccounting::Account Load (0.0ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.0ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)  [["category", "rollback"], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["credit_entry_id", 4], ["debit_entry_id", 3], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["uuid", "5c3c6e500e9a0131131d040ccee136f0"]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_transactions" SET "adjustment_transaction_id" = ?, "updated_at" = ?, "details" = ? WHERE "accounting_transactions"."id" = 1[0m  [["adjustment_transaction_id", 2], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["details", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", -5000], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mAccounting::Account Load (0.0ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 2], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2[0m  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["credit_entry_id", 2], ["debit_entry_id", 1], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["uuid", "5c40f7900e9a0131131e040ccee136f0"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."id" != 1 AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  UPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["state", "closed"], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'USD') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["currency", :USD], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."id" != 1 AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (1.5ms)[0m  UPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["state", "suspended"], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (1.9ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Source' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["currency", :GBP], ["name", "Source"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", -5000], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 2], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2[0m  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["credit_entry_id", 2], ["debit_entry_id", 1], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["uuid", "5c5480f00e9a0131131f040ccee136f0"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.2ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mAccounting::Account Load (0.0ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 2], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"]]
  [1m[36mAccounting::Account Load (0.0ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 3], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 3]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 3  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["credit_entry_id", 4], ["debit_entry_id", 3], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:43:19 UTC +00:00], ["uuid", "5c573ef00e9a01311320040ccee136f0"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mAccounting::Account Load (0.0ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
  [1m[36m (1.6ms)[0m  [1mDROP TABLE "accounting_accounts"[0m
  [1m[35m (1.5ms)[0m  CREATE TABLE "accounting_accounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "currency" varchar(3), "state" varchar(255), "configuration" text, "balance" integer DEFAULT 0, "owner_id" integer, "owner_type" varchar(255), "created_at" datetime, "updated_at" datetime) 
  [1m[36m (1.1ms)[0m  [1mCREATE INDEX "index_accounting_accounts_on_owner_id_and_owner_type" ON "accounting_accounts" ("owner_id", "owner_type")[0m
  [1m[35m (1.5ms)[0m  DROP TABLE "accounting_entries"
  [1m[36m (1.1ms)[0m  [1mCREATE TABLE "accounting_entries" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "amount" integer, "account_id" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (1.1ms)[0m  CREATE INDEX "index_accounting_entries_on_account_id" ON "accounting_entries" ("account_id")
  [1m[36m (1.9ms)[0m  [1mDROP TABLE "accounting_transactions"[0m
  [1m[35m (1.6ms)[0m  CREATE TABLE "accounting_transactions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(255), "category" varchar(255), "code" varchar(255), "description" text, "details" text, "credit_entry_id" integer, "debit_entry_id" integer, "adjustment_transaction_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (1.2ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_adjustment_transaction_id" ON "accounting_transactions" ("adjustment_transaction_id")[0m
  [1m[35m (1.4ms)[0m  CREATE INDEX "index_accounting_transactions_on_category" ON "accounting_transactions" ("category")
  [1m[36m (1.4ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_credit_entry_id" ON "accounting_transactions" ("credit_entry_id")[0m
  [1m[35m (1.2ms)[0m  CREATE INDEX "index_accounting_transactions_on_debit_entry_id" ON "accounting_transactions" ("debit_entry_id")
  [1m[36m (1.0ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_uuid" ON "accounting_transactions" ("uuid")[0m
  [1m[35m (1.0ms)[0m  DROP TABLE "users"
  [1m[36m (1.1ms)[0m  [1mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "state", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00], ["currency", "GBP"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.3ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.2ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 500], ["updated_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "accounting_entries" WHERE "accounting_entries"."account_id" = ?[0m  [["account_id", 1]]
  [1m[35m (1.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "state", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00], ["currency", "GBP"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 500], ["updated_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "state", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00], ["currency", "GBP"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 500], ["updated_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["state", "closed"], ["updated_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["state", "closed"], ["updated_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 2 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00], ["currency", :GBP], ["owner_id", 2], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE (state != 'closed')
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "created_at" = '2013-09-03 20:45:45.868217' WHERE "accounting_accounts"."id" = 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 765], ["created_at", Tue, 03 Sep 2013 20:45:45 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:45:45 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 765], ["updated_at", Tue, 03 Sep 2013 20:45:45 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 927], ["created_at", Tue, 03 Sep 2013 20:45:45 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:45:45 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 1692], ["updated_at", Tue, 03 Sep 2013 20:45:45 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 123], ["created_at", Tue, 03 Sep 2013 20:45:45 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:45:45 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 1815], ["updated_at", Tue, 03 Sep 2013 20:45:45 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", -1239], ["created_at", Tue, 03 Sep 2013 20:45:45 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:45:45 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 576], ["updated_at", Tue, 03 Sep 2013 20:45:45 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 212], ["created_at", Tue, 03 Sep 2013 20:45:45 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:45:45 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 788], ["updated_at", Tue, 03 Sep 2013 20:45:45 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", -232], ["created_at", Tue, 03 Sep 2013 20:45:45 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:45:45 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 556], ["updated_at", Tue, 03 Sep 2013 20:45:45 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 23], ["created_at", Fri, 13 Sep 2013 20:45:45 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:45:45 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 579], ["updated_at", Fri, 13 Sep 2013 20:45:45 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 123], ["created_at", Fri, 13 Sep 2013 20:45:45 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:45:45 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 702], ["updated_at", Fri, 13 Sep 2013 20:45:45 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 145], ["created_at", Fri, 13 Sep 2013 20:45:45 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:45:45 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 847], ["updated_at", Fri, 13 Sep 2013 20:45:45 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 7864], ["created_at", Fri, 13 Sep 2013 20:45:45 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:45:45 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 8711], ["updated_at", Fri, 13 Sep 2013 20:45:45 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", -7231], ["created_at", Fri, 13 Sep 2013 20:45:45 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:45:45 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 1480], ["updated_at", Fri, 13 Sep 2013 20:45:45 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccounting::Entry Load (0.2ms)[0m  [1mSELECT "accounting_entries".* FROM "accounting_entries" WHERE "accounting_entries"."account_id" = ? AND ("accounting_entries"."created_at" BETWEEN '2013-09-12 20:45:45.963919' AND '2013-10-03 20:45:45.964064') ORDER BY accounting_entries.created_at DESC[0m  [["account_id", 1]]
  [1m[35mAccounting::Account Load (0.2ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" IN (1) AND (state != 'closed')
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["state", "closed"], ["updated_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 2 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00], ["currency", :GBP], ["owner_id", 2], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.3ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE ("accounting_accounts"."state" IN ('closed'))
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:45:45 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["state", "suspended"], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "created_at" = '2013-09-03 20:45:46.021013' WHERE "accounting_accounts"."id" = 1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 765], ["created_at", Tue, 03 Sep 2013 20:45:46 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:45:46 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 765], ["updated_at", Tue, 03 Sep 2013 20:45:46 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 927], ["created_at", Tue, 03 Sep 2013 20:45:46 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:45:46 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 1692], ["updated_at", Tue, 03 Sep 2013 20:45:46 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 123], ["created_at", Tue, 03 Sep 2013 20:45:46 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:45:46 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 1815], ["updated_at", Tue, 03 Sep 2013 20:45:46 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", -1239], ["created_at", Tue, 03 Sep 2013 20:45:46 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:45:46 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 576], ["updated_at", Tue, 03 Sep 2013 20:45:46 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 212], ["created_at", Tue, 03 Sep 2013 20:45:46 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:45:46 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 788], ["updated_at", Tue, 03 Sep 2013 20:45:46 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", -232], ["created_at", Tue, 03 Sep 2013 20:45:46 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:45:46 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 556], ["updated_at", Tue, 03 Sep 2013 20:45:46 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 23], ["created_at", Fri, 13 Sep 2013 20:45:46 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:45:46 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 579], ["updated_at", Fri, 13 Sep 2013 20:45:46 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 123], ["created_at", Fri, 13 Sep 2013 20:45:46 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:45:46 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 702], ["updated_at", Fri, 13 Sep 2013 20:45:46 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 145], ["created_at", Fri, 13 Sep 2013 20:45:46 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:45:46 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 847], ["updated_at", Fri, 13 Sep 2013 20:45:46 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 7864], ["created_at", Fri, 13 Sep 2013 20:45:46 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:45:46 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 8711], ["updated_at", Fri, 13 Sep 2013 20:45:46 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", -7231], ["created_at", Fri, 13 Sep 2013 20:45:46 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:45:46 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 1480], ["updated_at", Fri, 13 Sep 2013 20:45:46 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccounting::Entry Load (0.2ms)[0m  [1mSELECT "accounting_entries".* FROM "accounting_entries" WHERE "accounting_entries"."account_id" = ? AND (created_at >= '2013-09-04 20:45:46.095758') ORDER BY accounting_entries.created_at DESC[0m  [["account_id", 1]]
  [1m[35mAccounting::Account Load (0.2ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" IN (1) AND (state != 'closed')
  [1m[36m (2.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["state", "closed"], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "balance" = 123 WHERE "accounting_accounts"."id" = 1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["state", "suspended"], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Source' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["currency", :GBP], ["name", "Source"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", -5000], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 2], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["credit_entry_id", 2], ["debit_entry_id", 1], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["uuid", "b3c994300e9a01311324040ccee136f0"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mAccounting::Account Load (0.0ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 2], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2[0m  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 3], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 3]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 3[0m  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["credit_entry_id", 4], ["debit_entry_id", 3], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["uuid", "b3ccb1b00e9a01311325040ccee136f0"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mAccounting::Account Load (0.0ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.3ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", -5000], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mAccounting::Account Load (0.0ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 2], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2[0m  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["credit_entry_id", 2], ["debit_entry_id", 1], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["uuid", "b3d305e00e9a01311326040ccee136f0"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 2], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["category", "rollback"], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["credit_entry_id", 4], ["debit_entry_id", 3], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["uuid", "b3d518700e9a01311327040ccee136f0"]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_transactions" SET "adjustment_transaction_id" = ?, "updated_at" = ?, "details" = ? WHERE "accounting_transactions"."id" = 1  [["adjustment_transaction_id", 2], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["details", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "accounting_entries" WHERE "accounting_entries"."account_id" = ?  [["account_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "accounting_entries" WHERE "accounting_entries"."account_id" = ?[0m  [["account_id", 2]]
  [1m[35mAccounting::Transaction Load (0.1ms)[0m  SELECT "accounting_transactions".* FROM "accounting_transactions" ORDER BY "accounting_transactions"."id" DESC LIMIT 1
  [1m[36mAccounting::Transaction Load (0.1ms)[0m  [1mSELECT "accounting_transactions".* FROM "accounting_transactions" ORDER BY "accounting_transactions"."id" DESC LIMIT 1[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", -5000], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 2], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["credit_entry_id", 2], ["debit_entry_id", 1], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["uuid", "b3d982f00e9a01311328040ccee136f0"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 2], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2[0m  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)  [["category", "rollback"], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["credit_entry_id", 4], ["debit_entry_id", 3], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["uuid", "b3db53300e9a01311329040ccee136f0"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_transactions" SET "adjustment_transaction_id" = ?, "updated_at" = ?, "details" = ? WHERE "accounting_transactions"."id" = 1[0m  [["adjustment_transaction_id", 2], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["details", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", -5000], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mAccounting::Account Load (0.0ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 2], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2[0m  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["credit_entry_id", 2], ["debit_entry_id", 1], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["uuid", "b3df3ad00e9a0131132a040ccee136f0"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."id" != 1 AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["state", "suspended"], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'USD') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["currency", :USD], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."id" != 1 AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["state", "closed"], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Test' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["currency", :GBP], ["name", "Test"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Test' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:45:46 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (1.7ms)[0m  [1mDROP TABLE "accounting_accounts"[0m
  [1m[35m (1.5ms)[0m  CREATE TABLE "accounting_accounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "currency" varchar(3), "state" varchar(255), "configuration" text, "balance" integer DEFAULT 0, "owner_id" integer, "owner_type" varchar(255), "created_at" datetime, "updated_at" datetime) 
  [1m[36m (1.2ms)[0m  [1mCREATE INDEX "index_accounting_accounts_on_owner_id_and_owner_type" ON "accounting_accounts" ("owner_id", "owner_type")[0m
  [1m[35m (1.2ms)[0m  DROP TABLE "accounting_entries"
  [1m[36m (1.2ms)[0m  [1mCREATE TABLE "accounting_entries" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "amount" integer, "account_id" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (1.2ms)[0m  CREATE INDEX "index_accounting_entries_on_account_id" ON "accounting_entries" ("account_id")
  [1m[36m (1.6ms)[0m  [1mDROP TABLE "accounting_transactions"[0m
  [1m[35m (1.2ms)[0m  CREATE TABLE "accounting_transactions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(255), "category" varchar(255), "code" varchar(255), "description" text, "details" text, "credit_entry_id" integer, "debit_entry_id" integer, "adjustment_transaction_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (1.1ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_adjustment_transaction_id" ON "accounting_transactions" ("adjustment_transaction_id")[0m
  [1m[35m (1.1ms)[0m  CREATE INDEX "index_accounting_transactions_on_category" ON "accounting_transactions" ("category")
  [1m[36m (1.0ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_credit_entry_id" ON "accounting_transactions" ("credit_entry_id")[0m
  [1m[35m (1.1ms)[0m  CREATE INDEX "index_accounting_transactions_on_debit_entry_id" ON "accounting_transactions" ("debit_entry_id")
  [1m[36m (1.5ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_uuid" ON "accounting_transactions" ("uuid")[0m
  [1m[35m (1.0ms)[0m  DROP TABLE "users"
  [1m[36m (1.1ms)[0m  [1mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.2ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "state", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["currency", "GBP"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.2ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.2ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 500], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "accounting_entries" WHERE "accounting_entries"."account_id" = ?[0m  [["account_id", 1]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "state", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["currency", "GBP"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 500], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "state", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["currency", "GBP"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 500], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 500], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["state", "closed"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 2 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["currency", :GBP], ["owner_id", 2], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE ("accounting_accounts"."state" IN ('closed'))[0m
  [1m[35m (1.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.9ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["state", "suspended"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "created_at" = '2013-09-03 20:46:32.208400' WHERE "accounting_accounts"."id" = 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 765], ["created_at", Tue, 03 Sep 2013 20:46:32 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:46:32 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 765], ["updated_at", Tue, 03 Sep 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 927], ["created_at", Tue, 03 Sep 2013 20:46:32 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:46:32 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 1692], ["updated_at", Tue, 03 Sep 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 123], ["created_at", Tue, 03 Sep 2013 20:46:32 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:46:32 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 1815], ["updated_at", Tue, 03 Sep 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -1239], ["created_at", Tue, 03 Sep 2013 20:46:32 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:46:32 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 576], ["updated_at", Tue, 03 Sep 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 212], ["created_at", Tue, 03 Sep 2013 20:46:32 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:46:32 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 788], ["updated_at", Tue, 03 Sep 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -232], ["created_at", Tue, 03 Sep 2013 20:46:32 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:46:32 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 556], ["updated_at", Tue, 03 Sep 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 23], ["created_at", Fri, 13 Sep 2013 20:46:32 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:46:32 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 579], ["updated_at", Fri, 13 Sep 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 123], ["created_at", Fri, 13 Sep 2013 20:46:32 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:46:32 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 702], ["updated_at", Fri, 13 Sep 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 145], ["created_at", Fri, 13 Sep 2013 20:46:32 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:46:32 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 847], ["updated_at", Fri, 13 Sep 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 7864], ["created_at", Fri, 13 Sep 2013 20:46:32 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:46:32 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 8711], ["updated_at", Fri, 13 Sep 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -7231], ["created_at", Fri, 13 Sep 2013 20:46:32 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:46:32 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 1480], ["updated_at", Fri, 13 Sep 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccounting::Entry Load (0.2ms)[0m  SELECT "accounting_entries".* FROM "accounting_entries" WHERE "accounting_entries"."account_id" = ? AND ("accounting_entries"."created_at" BETWEEN '2013-09-12 20:46:32.278944' AND '2013-10-03 20:46:32.279023') ORDER BY accounting_entries.created_at DESC  [["account_id", 1]]
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" IN (1) AND (state != 'closed')[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "created_at" = '2013-09-03 20:46:32.295551' WHERE "accounting_accounts"."id" = 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 765], ["created_at", Tue, 03 Sep 2013 20:46:32 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:46:32 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 765], ["updated_at", Tue, 03 Sep 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 927], ["created_at", Tue, 03 Sep 2013 20:46:32 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:46:32 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 1692], ["updated_at", Tue, 03 Sep 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 123], ["created_at", Tue, 03 Sep 2013 20:46:32 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:46:32 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 1815], ["updated_at", Tue, 03 Sep 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -1239], ["created_at", Tue, 03 Sep 2013 20:46:32 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:46:32 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 576], ["updated_at", Tue, 03 Sep 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 212], ["created_at", Tue, 03 Sep 2013 20:46:32 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:46:32 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 788], ["updated_at", Tue, 03 Sep 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -232], ["created_at", Tue, 03 Sep 2013 20:46:32 UTC +00:00], ["updated_at", Tue, 03 Sep 2013 20:46:32 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 556], ["updated_at", Tue, 03 Sep 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 23], ["created_at", Fri, 13 Sep 2013 20:46:32 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:46:32 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 579], ["updated_at", Fri, 13 Sep 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 123], ["created_at", Fri, 13 Sep 2013 20:46:32 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:46:32 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 702], ["updated_at", Fri, 13 Sep 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 145], ["created_at", Fri, 13 Sep 2013 20:46:32 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:46:32 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 847], ["updated_at", Fri, 13 Sep 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 7864], ["created_at", Fri, 13 Sep 2013 20:46:32 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:46:32 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 8711], ["updated_at", Fri, 13 Sep 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -7231], ["created_at", Fri, 13 Sep 2013 20:46:32 UTC +00:00], ["updated_at", Fri, 13 Sep 2013 20:46:32 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 1480], ["updated_at", Fri, 13 Sep 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccounting::Entry Load (0.2ms)[0m  SELECT "accounting_entries".* FROM "accounting_entries" WHERE "accounting_entries"."account_id" = ? AND (created_at >= '2013-09-04 20:46:32.410842') ORDER BY accounting_entries.created_at DESC  [["account_id", 1]]
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" IN (1) AND (state != 'closed')[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["state", "suspended"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["state", "closed"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "balance" = 123 WHERE "accounting_accounts"."id" = 1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["state", "closed"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["state", "closed"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 2 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["currency", :GBP], ["owner_id", 2], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE (state != 'closed')[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Test' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["currency", :GBP], ["name", "Test"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Test' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", -5000], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 2], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2[0m  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["credit_entry_id", 2], ["debit_entry_id", 1], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["uuid", "cf72cfd00e9a0131132e040ccee136f0"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mAccounting::Account Load (0.0ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'USD') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["currency", :USD], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."id" != 1 AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["state", "closed"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.3ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."id" != 1 AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["state", "suspended"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.2ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", -5000], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 2], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2[0m  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["credit_entry_id", 2], ["debit_entry_id", 1], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["uuid", "cf88d3a00e9a0131132f040ccee136f0"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 2], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (1.3ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["category", "rollback"], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["credit_entry_id", 4], ["debit_entry_id", 3], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["uuid", "cf8b34400e9a01311330040ccee136f0"]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_transactions" SET "adjustment_transaction_id" = ?, "updated_at" = ?, "details" = ? WHERE "accounting_transactions"."id" = 1  [["adjustment_transaction_id", 2], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["details", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "accounting_entries" WHERE "accounting_entries"."account_id" = ?  [["account_id", 1]]
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "accounting_entries" WHERE "accounting_entries"."account_id" = ?[0m  [["account_id", 2]]
  [1m[35mAccounting::Transaction Load (0.1ms)[0m  SELECT "accounting_transactions".* FROM "accounting_transactions" ORDER BY "accounting_transactions"."id" DESC LIMIT 1
  [1m[36mAccounting::Transaction Load (0.1ms)[0m  [1mSELECT "accounting_transactions".* FROM "accounting_transactions" ORDER BY "accounting_transactions"."id" DESC LIMIT 1[0m
  [1m[35m (0.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", -5000], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 2], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["credit_entry_id", 2], ["debit_entry_id", 1], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["uuid", "cf901a200e9a01311331040ccee136f0"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 2], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2[0m  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mAccounting::Account Load (0.0ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)  [["category", "rollback"], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["credit_entry_id", 4], ["debit_entry_id", 3], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["uuid", "cf926f600e9a01311332040ccee136f0"]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_transactions" SET "adjustment_transaction_id" = ?, "updated_at" = ?, "details" = ? WHERE "accounting_transactions"."id" = 1[0m  [["adjustment_transaction_id", 2], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["details", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.0ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mAccounting::Account Load (0.0ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Source' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["currency", :GBP], ["name", "Source"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", -5000], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 2], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2[0m  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["credit_entry_id", 2], ["debit_entry_id", 1], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["uuid", "cf9659700e9a01311333040ccee136f0"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.0ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mAccounting::Account Load (0.0ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 2], ["amount", -5000], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2  [["balance", 0], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 3], ["amount", 5000], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 3]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 3  [["balance", 5000], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["category", "deposit"], ["created_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["credit_entry_id", 4], ["debit_entry_id", 3], ["details", nil], ["updated_at", Thu, 03 Oct 2013 20:46:32 UTC +00:00], ["uuid", "cf98d8900e9a01311334040ccee136f0"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mAccounting::Account Load (0.0ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36m (3.3ms)[0m  [1mDROP TABLE "accounting_accounts"[0m
  [1m[35m (1.4ms)[0m  CREATE TABLE "accounting_accounts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "currency" varchar(3), "state" varchar(255), "configuration" text, "balance" integer DEFAULT 0, "owner_id" integer, "owner_type" varchar(255), "created_at" datetime, "updated_at" datetime) 
  [1m[36m (1.4ms)[0m  [1mCREATE INDEX "index_accounting_accounts_on_owner_id_and_owner_type" ON "accounting_accounts" ("owner_id", "owner_type")[0m
  [1m[35m (1.9ms)[0m  DROP TABLE "accounting_entries"
  [1m[36m (1.4ms)[0m  [1mCREATE TABLE "accounting_entries" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "amount" integer, "account_id" integer, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (1.8ms)[0m  CREATE INDEX "index_accounting_entries_on_account_id" ON "accounting_entries" ("account_id")
  [1m[36m (3.5ms)[0m  [1mDROP TABLE "accounting_transactions"[0m
  [1m[35m (1.3ms)[0m  CREATE TABLE "accounting_transactions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "uuid" varchar(255), "category" varchar(255), "code" varchar(255), "description" text, "details" text, "credit_entry_id" integer, "debit_entry_id" integer, "adjustment_transaction_id" integer, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (1.2ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_adjustment_transaction_id" ON "accounting_transactions" ("adjustment_transaction_id")[0m
  [1m[35m (1.2ms)[0m  CREATE INDEX "index_accounting_transactions_on_category" ON "accounting_transactions" ("category")
  [1m[36m (1.1ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_credit_entry_id" ON "accounting_transactions" ("credit_entry_id")[0m
  [1m[35m (1.1ms)[0m  CREATE INDEX "index_accounting_transactions_on_debit_entry_id" ON "accounting_transactions" ("debit_entry_id")
  [1m[36m (1.1ms)[0m  [1mCREATE INDEX "index_accounting_transactions_on_uuid" ON "accounting_transactions" ("uuid")[0m
  [1m[35m (1.4ms)[0m  DROP TABLE "users"
  [1m[36m (1.3ms)[0m  [1mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.4ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (3.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "created_at" = '2013-09-04 06:35:43.304604' WHERE "accounting_accounts"."id" = 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.3ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 765], ["created_at", Wed, 04 Sep 2013 06:35:43 UTC +00:00], ["updated_at", Wed, 04 Sep 2013 06:35:43 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.4ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 765], ["updated_at", Wed, 04 Sep 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 927], ["created_at", Wed, 04 Sep 2013 06:35:43 UTC +00:00], ["updated_at", Wed, 04 Sep 2013 06:35:43 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 1692], ["updated_at", Wed, 04 Sep 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 123], ["created_at", Wed, 04 Sep 2013 06:35:43 UTC +00:00], ["updated_at", Wed, 04 Sep 2013 06:35:43 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 1815], ["updated_at", Wed, 04 Sep 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -1239], ["created_at", Wed, 04 Sep 2013 06:35:43 UTC +00:00], ["updated_at", Wed, 04 Sep 2013 06:35:43 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 576], ["updated_at", Wed, 04 Sep 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 212], ["created_at", Wed, 04 Sep 2013 06:35:43 UTC +00:00], ["updated_at", Wed, 04 Sep 2013 06:35:43 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 788], ["updated_at", Wed, 04 Sep 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -232], ["created_at", Wed, 04 Sep 2013 06:35:43 UTC +00:00], ["updated_at", Wed, 04 Sep 2013 06:35:43 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 556], ["updated_at", Wed, 04 Sep 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 23], ["created_at", Sat, 14 Sep 2013 06:35:43 UTC +00:00], ["updated_at", Sat, 14 Sep 2013 06:35:43 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 579], ["updated_at", Sat, 14 Sep 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 123], ["created_at", Sat, 14 Sep 2013 06:35:43 UTC +00:00], ["updated_at", Sat, 14 Sep 2013 06:35:43 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 702], ["updated_at", Sat, 14 Sep 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 145], ["created_at", Sat, 14 Sep 2013 06:35:43 UTC +00:00], ["updated_at", Sat, 14 Sep 2013 06:35:43 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 847], ["updated_at", Sat, 14 Sep 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 7864], ["created_at", Sat, 14 Sep 2013 06:35:43 UTC +00:00], ["updated_at", Sat, 14 Sep 2013 06:35:43 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 8711], ["updated_at", Sat, 14 Sep 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -7231], ["created_at", Sat, 14 Sep 2013 06:35:43 UTC +00:00], ["updated_at", Sat, 14 Sep 2013 06:35:43 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 1480], ["updated_at", Sat, 14 Sep 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccounting::Entry Load (0.3ms)[0m  SELECT "accounting_entries".* FROM "accounting_entries" WHERE "accounting_entries"."account_id" = ? AND (created_at >= '2013-09-05 06:35:43.425660') ORDER BY accounting_entries.created_at DESC  [["account_id", 1]]
  [1m[36mAccounting::Account Load (0.3ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" IN (1) AND (state != 'closed')[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["state", "suspended"], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "created_at" = '2013-09-04 06:35:43.468880' WHERE "accounting_accounts"."id" = 1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 765], ["created_at", Wed, 04 Sep 2013 06:35:43 UTC +00:00], ["updated_at", Wed, 04 Sep 2013 06:35:43 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 765], ["updated_at", Wed, 04 Sep 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 927], ["created_at", Wed, 04 Sep 2013 06:35:43 UTC +00:00], ["updated_at", Wed, 04 Sep 2013 06:35:43 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 1692], ["updated_at", Wed, 04 Sep 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 123], ["created_at", Wed, 04 Sep 2013 06:35:43 UTC +00:00], ["updated_at", Wed, 04 Sep 2013 06:35:43 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 1815], ["updated_at", Wed, 04 Sep 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -1239], ["created_at", Wed, 04 Sep 2013 06:35:43 UTC +00:00], ["updated_at", Wed, 04 Sep 2013 06:35:43 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 576], ["updated_at", Wed, 04 Sep 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 212], ["created_at", Wed, 04 Sep 2013 06:35:43 UTC +00:00], ["updated_at", Wed, 04 Sep 2013 06:35:43 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 788], ["updated_at", Wed, 04 Sep 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -232], ["created_at", Wed, 04 Sep 2013 06:35:43 UTC +00:00], ["updated_at", Wed, 04 Sep 2013 06:35:43 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 556], ["updated_at", Wed, 04 Sep 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 23], ["created_at", Sat, 14 Sep 2013 06:35:43 UTC +00:00], ["updated_at", Sat, 14 Sep 2013 06:35:43 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 579], ["updated_at", Sat, 14 Sep 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 123], ["created_at", Sat, 14 Sep 2013 06:35:43 UTC +00:00], ["updated_at", Sat, 14 Sep 2013 06:35:43 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 702], ["updated_at", Sat, 14 Sep 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 145], ["created_at", Sat, 14 Sep 2013 06:35:43 UTC +00:00], ["updated_at", Sat, 14 Sep 2013 06:35:43 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 847], ["updated_at", Sat, 14 Sep 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 7864], ["created_at", Sat, 14 Sep 2013 06:35:43 UTC +00:00], ["updated_at", Sat, 14 Sep 2013 06:35:43 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 8711], ["updated_at", Sat, 14 Sep 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -7231], ["created_at", Sat, 14 Sep 2013 06:35:43 UTC +00:00], ["updated_at", Sat, 14 Sep 2013 06:35:43 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 1480], ["updated_at", Sat, 14 Sep 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccounting::Entry Load (0.2ms)[0m  SELECT "accounting_entries".* FROM "accounting_entries" WHERE "accounting_entries"."account_id" = ? AND ("accounting_entries"."created_at" BETWEEN '2013-09-13 06:35:43.558436' AND '2013-10-04 06:35:43.558520') ORDER BY accounting_entries.created_at DESC  [["account_id", 1]]
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" IN (1) AND (state != 'closed')[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["state", "closed"], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 2 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["currency", :GBP], ["owner_id", 2], ["owner_type", "User"], ["state", "open"], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.2ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE (state != 'closed')[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["state", "closed"], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["state", "open"], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["state", "closed"], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 2 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["currency", :GBP], ["owner_id", 2], ["owner_type", "User"], ["state", "open"], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.3ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE ("accounting_accounts"."state" IN ('closed'))
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["state", "closed"], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "balance" = 123 WHERE "accounting_accounts"."id" = 1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["state", "suspended"], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["state", "open"], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -5000], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", -5000], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 2], ["amount", 5000], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.0ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2  [["balance", 5000], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["category", "deposit"], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["credit_entry_id", 2], ["debit_entry_id", 1], ["details", nil], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["uuid", "1e53d9a00eed01311338040ccee136f0"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mAccounting::Account Load (0.0ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'USD') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["currency", :USD], ["name", "Credit"], ["state", "open"], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."id" != 1 AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["state", "suspended"], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."id" != 1 AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "accounting_accounts" SET "state" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["state", "closed"], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.2ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' ORDER BY "accounting_accounts"."id" ASC LIMIT 1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = ? ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Source' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["currency", :GBP], ["name", "Source"], ["state", "open"], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -5000], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", -5000], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mAccounting::Account Load (0.0ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 2], ["amount", 5000], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.0ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2  [["balance", 5000], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["category", "deposit"], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["credit_entry_id", 2], ["debit_entry_id", 1], ["details", nil], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["uuid", "1e6349700eed01311339040ccee136f0"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.0ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mAccounting::Account Load (0.0ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 2], ["amount", -5000], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2[0m  [["balance", 0], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 3], ["amount", 5000], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 3]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 3[0m  [["balance", 5000], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration\nallow_negative_balance: false\n"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)  [["category", "deposit"], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["credit_entry_id", 4], ["debit_entry_id", 3], ["details", nil], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["uuid", "1e6666700eed0131133a040ccee136f0"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mAccounting::Account Load (0.0ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", -5000], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", -5000], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 2], ["amount", 5000], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2  [["balance", 5000], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["category", "deposit"], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["credit_entry_id", 2], ["debit_entry_id", 1], ["details", nil], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["uuid", "1e6a16900eed0131133b040ccee136f0"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 2], ["amount", -5000], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2[0m  [["balance", 0], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 5000], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 0], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)  [["category", "rollback"], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["credit_entry_id", 4], ["debit_entry_id", 3], ["details", nil], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["uuid", "1e6c1a100eed0131133c040ccee136f0"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "accounting_transactions" SET "adjustment_transaction_id" = ?, "updated_at" = ?, "details" = ? WHERE "accounting_transactions"."id" = 1[0m  [["adjustment_transaction_id", 2], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["details", nil]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "accounting_entries" WHERE "accounting_entries"."account_id" = ?[0m  [["account_id", 1]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "accounting_entries" WHERE "accounting_entries"."account_id" = ?  [["account_id", 2]]
  [1m[36mAccounting::Transaction Load (0.2ms)[0m  [1mSELECT "accounting_transactions".* FROM "accounting_transactions" ORDER BY "accounting_transactions"."id" DESC LIMIT 1[0m
  [1m[35mAccounting::Transaction Load (0.2ms)[0m  SELECT "accounting_transactions".* FROM "accounting_transactions" ORDER BY "accounting_transactions"."id" DESC LIMIT 1
  [1m[36m (0.8ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.3ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Debit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["currency", :GBP], ["name", "Debit"], ["state", "open"], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Credit' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["currency", :GBP], ["name", "Credit"], ["state", "open"], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", -5000], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", -5000], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 2], ["amount", 5000], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2[0m  [["balance", 5000], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)  [["category", "deposit"], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["credit_entry_id", 2], ["debit_entry_id", 1], ["details", nil], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["uuid", "1e7327b00eed0131133d040ccee136f0"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 2], ["amount", -5000], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 2  [["balance", 0], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 5000], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 0], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "accounting_transactions" ("category", "created_at", "credit_entry_id", "debit_entry_id", "details", "updated_at", "uuid") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["category", "rollback"], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["credit_entry_id", 4], ["debit_entry_id", 3], ["details", nil], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["uuid", "1e7536700eed0131133e040ccee136f0"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_transactions" SET "adjustment_transaction_id" = ?, "updated_at" = ?, "details" = ? WHERE "accounting_transactions"."id" = 1  [["adjustment_transaction_id", 2], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["details", nil]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.0ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.2ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Test' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "name", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["currency", :GBP], ["name", "Test"], ["state", "open"], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE ("accounting_accounts"."name" = 'Test' AND "accounting_accounts"."currency" = 'GBP') LIMIT 1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00], ["updated_at", Fri, 04 Oct 2013 06:35:43 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "owner_id", "owner_type", "state", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Fri, 04 Oct 2013 06:35:44 UTC +00:00], ["currency", :GBP], ["owner_id", 1], ["owner_type", "User"], ["state", "open"], ["updated_at", Fri, 04 Oct 2013 06:35:44 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Exists (0.1ms)[0m  SELECT 1 AS one FROM "accounting_accounts" WHERE "accounting_accounts"."owner_type" = 'User' AND "accounting_accounts"."owner_id" = 1 AND "accounting_accounts"."currency" = 'GBP' AND "accounting_accounts"."name" IS NULL AND (state != 'closed') LIMIT 1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "state", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Fri, 04 Oct 2013 06:35:44 UTC +00:00], ["currency", "GBP"], ["state", "open"], ["updated_at", Fri, 04 Oct 2013 06:35:44 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 500], ["created_at", Fri, 04 Oct 2013 06:35:44 UTC +00:00], ["updated_at", Fri, 04 Oct 2013 06:35:44 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 500], ["updated_at", Fri, 04 Oct 2013 06:35:44 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "accounting_entries" WHERE "accounting_entries"."account_id" = ?  [["account_id", 1]]
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "state", "updated_at") VALUES (?, ?, ?, ?, ?)  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Fri, 04 Oct 2013 06:35:44 UTC +00:00], ["currency", "GBP"], ["state", "open"], ["updated_at", Fri, 04 Oct 2013 06:35:44 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["account_id", 1], ["amount", 500], ["created_at", Fri, 04 Oct 2013 06:35:44 UTC +00:00], ["updated_at", Fri, 04 Oct 2013 06:35:44 UTC +00:00]]
  [1m[36mAccounting::Account Load (0.1ms)[0m  [1mSELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1  [["balance", 500], ["updated_at", Fri, 04 Oct 2013 06:35:44 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "accounting_accounts" ("configuration", "created_at", "currency", "state", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"], ["created_at", Fri, 04 Oct 2013 06:35:44 UTC +00:00], ["currency", "GBP"], ["state", "open"], ["updated_at", Fri, 04 Oct 2013 06:35:44 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "accounting_entries" ("account_id", "amount", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["account_id", 1], ["amount", 500], ["created_at", Fri, 04 Oct 2013 06:35:44 UTC +00:00], ["updated_at", Fri, 04 Oct 2013 06:35:44 UTC +00:00]]
  [1m[35mAccounting::Account Load (0.1ms)[0m  SELECT "accounting_accounts".* FROM "accounting_accounts" WHERE "accounting_accounts"."id" = ? AND (state != 'closed') ORDER BY "accounting_accounts"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.1ms)[0m  [1mUPDATE "accounting_accounts" SET "balance" = ?, "updated_at" = ?, "configuration" = ? WHERE "accounting_accounts"."id" = 1[0m  [["balance", 500], ["updated_at", Fri, 04 Oct 2013 06:35:44 UTC +00:00], ["configuration", "--- !ruby/object:Accounting::AccountConfiguration {}\n"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
